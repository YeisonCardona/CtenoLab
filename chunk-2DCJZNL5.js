import{h as j,l as F}from"./chunk-KULYEICZ.js";import"./chunk-AV57WIB4.js";import"./chunk-75Z64XSP.js";import{a as V,b as A}from"./chunk-FNZD6ZPB.js";import{a as G,b as N}from"./chunk-J7R32EXU.js";import{b as R}from"./chunk-U5Z6PHZB.js";import{b as O,c as k}from"./chunk-BN5QOK7L.js";import{l as B,o as L}from"./chunk-EXEM6OM4.js";import{l as E,m as H}from"./chunk-RWQLXEFD.js";import{Ab as T,Bb as a,Cb as o,Db as m,Fb as v,Jb as x,Kb as l,Sa as r,Wb as y,Xa as g,Yb as i,Zb as I,_b as C,db as D,ga as p,ha as u,mc as f,nc as w,ra as b,ub as d,vb as s,wb as M,yb as P,zb as h}from"./chunk-FHWKK7EC.js";import{i as S}from"./chunk-5KHZBZE7.js";function Y(e,n){if(e&1){let t=v();a(0,"button",1),x("click",function(){p(t);let c=l(2);return u(c.hardwareService.autoConnect())}),i(1," Auto-Connect to HardwareDescription "),a(2,"mat-icon"),i(3,"usb"),o()()}}function $(e,n){if(e&1){let t=v();a(0,"div",0)(1,"button",1),x("click",function(){p(t);let c=l();return u(c.hardwareService.requestAndConnectDevice())}),i(2," Select HardwareDescription to Connect "),a(3,"mat-icon"),i(4,"usb"),o()(),d(5,Y,4,0,"button",2),o()}if(e&2){let t=l();r(5),s(t.hardwareService.hasAvailableDevice()?5:-1)}}function q(e,n){if(e&1&&(a(0,"b"),i(1),o(),i(2),m(3,"br")),e&2){let t=n.$implicit;r(),C("",t.name,":"),r(),C(" ",t.value)}}function z(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().latency*1e3,"1.0-2")," \xB5s ")}}function J(e,n){e&1&&i(0," ??? ")}function K(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().jitter*1e3,"1.0-2")," \xB5s ")}}function Q(e,n){e&1&&i(0," ??? ")}function X(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().min*1e3,"1.0-2")," \xB5s ")}}function Z(e,n){e&1&&i(0," ??? ")}function ee(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().max,"1.0-2")," ms ")}}function te(e,n){e&1&&i(0," ??? ")}function ie(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().median*1e3,"1.0-2")," \xB5s ")}}function ne(e,n){e&1&&i(0," ??? ")}function ae(e,n){if(e&1&&i(0),e&2){let t=l(2);C(" ",t.hardwareService.latencyStats().samples," ")}}function oe(e,n){e&1&&i(0," ??? ")}function re(e,n){if(e&1){let t=v();a(0,"div",3)(1,"button",4),x("click",function(){p(t);let c=l();return u(c.hardwareService.disconnect())}),i(2," Disconnect from HardwareDescription "),a(3,"mat-icon"),i(4,"usb_off"),o()(),a(5,"button",1),x("click",function(){p(t);let c=l();return u(c.testConnection())}),i(6," Test Connection "),o()(),a(7,"div",5)(8,"p",6),i(9,"Connection successful!"),o(),a(10,"p",7),i(11,"Connection failed!"),o()(),m(12,"mat-divider"),a(13,"p",5),P(14,q,4,2,null,null,M),o(),m(16,"mat-divider"),a(17,"div",8)(18,"button",9),x("click",function(){p(t);let c=l();return u(c.hardwareService.measureLatency())}),i(19," Start Latency Test "),a(20,"mat-icon"),i(21,"acute"),o()(),a(22,"p")(23,"b"),i(24,"Latency:"),o(),d(25,z,2,4)(26,J,1,0),m(27,"br"),a(28,"b"),i(29,"Jitter:"),o(),d(30,K,2,4)(31,Q,1,0),m(32,"br"),a(33,"b"),i(34,"Min:"),o(),d(35,X,2,4)(36,Z,1,0),m(37,"br"),a(38,"b"),i(39,"Max:"),o(),d(40,ee,2,4)(41,te,1,0),m(42,"br"),a(43,"b"),i(44,"Median:"),o(),d(45,ie,2,4)(46,ne,1,0),m(47,"br"),a(48,"b"),i(49,"Samples:"),o(),d(50,ae,1,1)(51,oe,1,0),o()()}if(e&2){let t=l();r(8),y("active",t.successConnectedMessage()),r(2),y("active",t.failConnectedMessage()),r(4),h(t.hardwareService.getProperties()),r(4),T("disabled",t.hardwareService.measuringLatency()),r(7),s(t.hardwareService.latencyStats().latency>0?25:26),r(5),s(t.hardwareService.latencyStats().jitter>0?30:31),r(5),s(t.hardwareService.latencyStats().min>0?35:36),r(5),s(t.hardwareService.latencyStats().max>0?40:41),r(5),s(t.hardwareService.latencyStats().median>0?45:46),r(5),s(t.hardwareService.latencyStats().samples>0?50:51)}}function le(e,n){if(e&1){let t=v();a(0,"button",12),x("click",function(){let c=p(t).$implicit,W=l(2);return u(W.onCommand(c))}),i(1),o()}if(e&2){let t=n.$implicit;r(),I(t)}}function ce(e,n){if(e&1&&(m(0,"mat-divider"),a(1,"div",10),P(2,le,2,1,"button",11,M),o()),e&2){let t=l();r(2),h(t.testCommands)}}var U=class e{constructor(n,t,_){this.navigationService=n;this.breadcrumbService=t;this.hardwareService=_;n.setActiveLink("/hardware-control-panel"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Hardware Control Panel",url:"/hardware-control-panel"}])}successConnectedMessage=b(!1);failConnectedMessage=b(!1);devMode=window.location.hostname.startsWith("localhost");ngOnInit(){return S(this,null,function*(){yield this.hardwareService.checkAvailableDevice()})}testConnection(){return S(this,null,function*(){this.hardwareService.flushQueues(),yield this.hardwareService.writeLine("CMD=PING;CMD=@BIP 1000 100 128;CMD=@BRAND;");let n=yield this.hardwareService.readLine();this.successConnectedMessage.set(n==="RESP=PONG;"),this.failConnectedMessage.set(n!=="RESP=PONG;")})}onCommand(n){return S(this,null,function*(){yield this.hardwareService.writeLine(n)})}testCommands=["CMD=PING;","CMD=BIP 1000 100 128;","CMD=BRAND;","CMD=BIP;","CMD=BIP 3000;","CMD=BIP 1000 500;","CMD=BIP 2000 300 64;","CMD=BIP 2000 300 128;","CMD=BIP 2000 300 255;","CMD=CLA;",'CMD=LOG "testing log message";','CMD=LOG "testing log message" RED;','CMD=LOG "testing log message" BLUE;','CMD=LOG "testing log message" GREEN;','CMD=LOG "testing log message" CYAN;','CMD=LOG "testing log message" YELLOW;','CMD=LOG "testing log message" MAGENTA;','CMD=LOG "testing log message" ORANGE;','CMD=LOG "testing log message" PINK;','CMD=LOG "This is a long title that should wrap automatically across multiple lines if it doesnt fit.";','CMD=TITLE "This is a long title that should wrap automatically across multiple lines if it doesnt fit.";','CMD=TITLE "Unilateral Motor Imagery" BLUE;','CMD=TITLE "Unilateral Motor Imagery" RED 3;','CMD=TITLE "Motor Imagery" YELLOW 4;'];static \u0275fac=function(t){return new(t||e)(g(V),g(A),g(R))};static \u0275cmp=D({type:e,selectors:[["app-hardware-control-panel"]],decls:5,vars:2,consts:[[1,"flex-row","margin-bottom-large"],["matButton","filled",3,"click"],["matButton","filled"],[1,"flex-row"],["matButton","filled",1,"disconnect",3,"click"],[1,"margin-top-large"],[1,"success"],[1,"fail"],[1,"margin-bottom-large","margin-top-large"],["matButton","filled",3,"click","disabled"],[1,"button-row","margin-top-large"],["matButton","tonal",1,"command-button"],["matButton","tonal",1,"command-button",3,"click"]],template:function(t,_){t&1&&(a(0,"h1"),i(1,"HardwareDescription Control Panel"),o(),d(2,$,6,1,"div",0)(3,re,52,11),d(4,ce,4,0)),t&2&&(r(2),s(_.hardwareService.isConnected()?3:2),r(2),s(_.devMode?4:-1))},dependencies:[L,B,N,G,k,O,F,j,H,E],styles:[".disconnect[_ngcontent-%COMP%]{background-color:var(--mat-sys-error)!important}.success[_ngcontent-%COMP%]{display:none}.success.active[_ngcontent-%COMP%]{display:block;color:var(--mat-sys-primary)}.fail[_ngcontent-%COMP%]{display:none}.fail.active[_ngcontent-%COMP%]{display:block;color:var(--mat-sys-error)}.button-row[_ngcontent-%COMP%]{display:flex;flex-flow:wrap;gap:8px;justify-content:space-evenly}.command-button[_ngcontent-%COMP%]{font-family:monospace;font-size:.8rem}"]})};export{U as HardwareControlPanel};
