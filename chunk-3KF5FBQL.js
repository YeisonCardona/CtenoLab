import{a as q}from"./chunk-ZXYJ7DLS.js";import{c as F}from"./chunk-4PHGQJCB.js";import{a as O,c as _,d as P}from"./chunk-OLUWFB5T.js";import{k as I}from"./chunk-FNTTNCNS.js";import{c as k}from"./chunk-XRGWM46W.js";import{b as E}from"./chunk-EBVX5MXQ.js";import{c as T}from"./chunk-KKFSZARV.js";import{$b as S,Ab as y,Bb as s,Cb as o,Mb as M,Sa as n,Yb as w,_b as a,ac as b,db as f,hb as g,ra as d,tb as h,ua as u,wb as v,yb as C,zb as x}from"./chunk-JNWBK6C6.js";import{j as c,k as p}from"./chunk-GV7GV3NK.js";function R(r,e){if(r&1&&(s(0,"div",4,0)(2,"div",5),a(3),o(),s(4,"div",6),a(5),o()()),r&2){let t=e.$implicit,i=M();h("cue-key",i.fixClass(t.value))("flicker-frequency",t.value),n(3),S(t.class),n(2),b("",t.value," Hz")}}var B=class r extends _{showIcon=d(Object.fromEntries(this.cues().map(e=>[e.class,!1])));fullWindowLink="/paradigms/ssvep/speller/stimuli";normalWindowLink="/paradigms/ssvep/speller";startCountdownValue=0;flickers=[];generateCuesOnFormUpdate=!0;ngOnInit(){return p(this,null,function*(){c(r.prototype,this,"ngOnInit").call(this),yield this.hardwareService.writeLine("CMD=@CLA;"),yield this.hardwareService.writeLine('CMD=@TITLE TEXT="SSVEP Speller" COLOR=BLUE SIZE=3;')})}generateCues(){let e=this.experimentConfig.refresh_rate,t=this.experimentConfig.min_frequency||12,i=this.experimentConfig.max_frequency||120,j=Object.keys(this.stimulusCommandMap).length,l=[],L=this.generateFrequencies(e,t,i),m=0;for(let[D,z]of Object.entries(this.stimulusCommandMap))l.push({class:D,value:L[m]?.toString()??"??"}),m++;this.cues.set(l)}generateTrials(){return[]}setFlickers(){let e=this.experimentConfig.refresh_rate;this.flickers=[],this.cuesDivElement.forEach(t=>{let i=Number(t.nativeElement.getAttribute("flicker-frequency"));this.flickers.push(new q(t,i,e))})}showTrial(e){}stopStimuliSequence(){this.flickers.forEach(e=>e.stop())}runStimuliSequence(){console.log("START"),this.setFlickers(),this.flickers.forEach(e=>e.start())}static \u0275fac=(()=>{let e;return function(i){return(e||(e=u(r)))(i||r)}})();static \u0275cmp=f({type:r,selectors:[["app-stimuli"]],features:[g],decls:5,vars:4,consts:[["cueElement",""],[3,"hostRef","showCrossBar"],[1,"grid-wrapper"],[1,"grid-container"],[1,"cue","flicker","grid-item"],[1,"speller-cue"],[1,"speller-freq"]],template:function(t,i){t&1&&(s(0,"app-stimuli-layout",1)(1,"div",2)(2,"div",3),C(3,R,6,4,"div",4,v),o()()()),t&2&&(y("hostRef",i)("showCrossBar",!1),n(),w("embedded",i.embedded==="embedded"),n(2),x(i.cues()))},dependencies:[k,O,E,F,I,P,T],styles:[".grid-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:120px;padding:16px;max-width:90vw;width:100%}.grid-item[_ngcontent-%COMP%]{aspect-ratio:1/1;width:100%;background-color:var(--mat-sys-inverse-on-surface);display:grid;align-items:center;justify-content:center;border-radius:8px;font-weight:700}.speller-cue[_ngcontent-%COMP%]{color:color-mix(in srgb,var(--mat-sys-primary) 50%,transparent);font-size:2rem;text-align:center}.speller-freq[_ngcontent-%COMP%]{color:color-mix(in srgb,var(--mat-sys-primary) 50%,transparent);font-weight:400;font-size:.7rem}.grid-wrapper.embedded[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(60px,1fr));gap:20px;width:90%}"]})};export{B as a};
