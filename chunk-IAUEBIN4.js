import{a as ae}from"./chunk-5ZGYBZ4X.js";import{a as X,b as Y,c as Z,d as ee,e as ie,f as te}from"./chunk-3G7FEF5B.js";import{b as q,c as J}from"./chunk-YGJZO764.js";import"./chunk-FDI5VVZL.js";import{k as Q}from"./chunk-DUXI72MP.js";import{a as G}from"./chunk-TC42CYHG.js";import"./chunk-5E6RAWY4.js";import"./chunk-4PHGQJCB.js";import"./chunk-6TBHGCTQ.js";import{c as K}from"./chunk-FNTTNCNS.js";import"./chunk-JQYROLX5.js";import"./chunk-IXPZEY46.js";import{a as z,b as $,f as U}from"./chunk-5ZKSSP3E.js";import"./chunk-DIONBDFX.js";import{a as L,b as B}from"./chunk-OAVLZCYW.js";import{b as O}from"./chunk-T26HEB2W.js";import"./chunk-NP432326.js";import"./chunk-2UE2V2R5.js";import"./chunk-Q7G7UQXQ.js";import{b as N}from"./chunk-H53LNFG5.js";import"./chunk-VVJ3YVZY.js";import"./chunk-O3YAIXEY.js";import{b as j}from"./chunk-XRGWM46W.js";import"./chunk-EBVX5MXQ.js";import"./chunk-KKFSZARV.js";import{a as A}from"./chunk-TLAT6ZHR.js";import{h as W}from"./chunk-6MKFGCP3.js";import"./chunk-ZJIUVY4T.js";import"./chunk-CR4H4DNL.js";import"./chunk-WDA2SWQK.js";import"./chunk-EVU24ONZ.js";import{a as E,c as H}from"./chunk-JW5YZPO3.js";import{i as R,k as F,n as V}from"./chunk-NRSOVIAX.js";import{m as I}from"./chunk-4SNU4EVC.js";import{$b as D,Ab as r,Bb as t,Cb as a,Db as l,Hb as w,Lb as v,Mb as T,Pa as g,Qa as M,Sa as i,Xa as u,_b as d,bc as P,db as _,ga as c,gc as x,ha as b,hb as S,sc as h,ub as C,vb as k}from"./chunk-JNWBK6C6.js";import"./chunk-GV7GV3NK.js";function se(f,ne){if(f&1&&l(0,"app-diagram",6),f&2){let n=T();r("diagram",n.diagram())}}var re=class f extends te{constructor(n,s,e,o,p,m,y){super(n,s,e,o,p);this.navigationService=m;this.breadcrumbService=y;this.navigationService.setActiveLink("/paradigms/p300/speller"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Paradigms",url:"/paradigms"},{label:"P300",url:"/paradigms/p300"},{label:"Speller",url:"/paradigms/p300/speller"}])}requieredTier="Basic";storageKey="speller-p300";resetValues(){this.formData.set({flash_duration:125,soa_inter_trial:250,soa_intra_trial:1e3,total_trials:20,target_duration:1e3,target:3,non_target:7})}summary=h(()=>{let n=this.formData();if(!n||Object.keys(n).length===0)return"";let s=[],e=n.total_trials,o=n.soa_inter_trial,p=Math.round((n.flash_duration+o)*e*12/6e4);e>1e3&&s.push("The total number of trials exceeds 1000. This may lead to participant fatigue."),p>30&&s.push("Estimated experiment duration exceeds 30 minutes. Consider reducing trials or stimulus duration."),o<10&&s.push("SOA range is too narrow. Randomization may be imperceptible and timing may not vary meaningfully across trials.");let m=s.length?`<p class="warning"><b>\u26A0\uFE0F Warnings:</b><br>${s.map(y=>`\u2022 ${y}`).join("<br>")}</p>`:"";return`
    <p class="summary-block">
      <b>Total trials</b>: ${e}<br>
      <b>Stimulus duration</b>: ${n.flash_duration} ms<br>
      <b>SOA</b>: ${o} ms<br>
      <b>Estimated duration</b>: ${p} min
    </p>
    ${m}
  `});experiment={name:"P300 Speller",description:"This experiment implements a matrix-based <b>P300 speller paradigm</b> in which rows and columns of a <b>character grid</b> flash in rapid succession. Participants focus on a specific letter or symbol within the matrix, and a <b>P300 response</b> is elicited when the row or column containing the target character is highlighted. This paradigm is widely used for <b>non-verbal communication</b> and <b>attention-based BCI systems</b>.",objective:"The objective of this experiment is to determine the feasibility of decoding <b>user intent</b> by detecting <b>P300 components</b> elicited during attention to specific characters. By analyzing the brain's response to row and column flashes, the system can identify the target character being attended, enabling <b>spelling without motor output</b>.",procedure:"Participants are seated in front of a grid (e.g., <b>6\xD76 matrix</b>) containing letters, numbers, or symbols. Each trial consists of a rapid sequence of <b>row and column flashes</b>, presented in random order. The participant focuses on a specific character, and silently counts or attends each time its <b>row or column</b> is illuminated. Stimuli are presented for brief durations (typically <b>100\u2013200 ms</b> per flash), with short inter-stimulus intervals. The EEG signal is continuously recorded and analyzed to detect <b>P300 responses</b> corresponding to the target row and column. A session may include <b>multiple target selections</b> and typically lasts <b>20\u201330 minutes</b>."};stimulusCommandMap={A:"a",B:"b",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",J:"j",K:"k",L:"l",M:"m",N:"n",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",U:"u",V:"v",W:"w",X:"x",Y:"y",Z:"z",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",_:"_"};formField=[{type:"slider",key:"flash_duration",label:"Flash Duration",value:125,min:10,max:1e3,step:1,suffix:"",hint:""},{type:"slider",key:"target_duration",label:"Target Duration",value:1e3,min:500,max:2e3,step:1,suffix:"",hint:""},{type:"slider",key:"target",label:"Targets",value:80,min:1,max:300,step:1,suffix:"",hint:"Number of target stimuli to present"},{type:"slider",key:"non_target",label:"Non-Targets",value:320,min:1,max:1e3,step:1,suffix:"",hint:"Number of non-target stimuli to present"},{type:"slider",key:"soa_inter_trial",label:"Inter-Trial SOA (ms)",value:250,min:0,max:1e3,step:1,suffix:" ms",hint:"Delay between the onset of consecutive stimuli (i.e., between trials)"},{type:"slider",key:"soa_intra_trial",label:"Intra-Trial SOA (ms)",value:1e3,min:100,max:2e3,step:10,suffix:" ms",hint:"Delay between consecutive flashes within a single trial"},{type:"slider",key:"total_trials",label:"Total Trials",value:20,min:1,max:500,step:1,suffix:" trials",hint:""}];diagram=h(()=>({}));static \u0275fac=function(s){return new(s||f)(u(E),u(H),u(N),u(K),u(O),u(L),u(B))};static \u0275cmp=_({type:f,selectors:[["app-speller"]],features:[S],decls:43,vars:26,consts:[["taskPanel",""],["tabGroup",""],["formComponent",""],[1,"no-margin-bottom"],[1,"align-justify",3,"innerHTML"],[1,"grid-responsive-2"],[3,"diagram"],["dynamicHeight","","mat-stretch-tabs","","animationDuration","100ms",1,"example-stretched-tabs","mat-elevation-z4"],["label","Stimuli Delivery"],[1,"margin-bottom-small"],[3,"valueChange","config","columns","storageKey"],[1,"margin-top-large",3,"innerHTML"],[1,"flex-row","flex-row-left"],[1,"elipsis-96",3,"href"],["matIconButton","",3,"cdkCopyToClipboard"],["matButton","filled",1,"margin-top-large","margin-bottom-large",3,"click"],[3,"commandRegistry","experimentConfig","embedded","stimulusCommandMap","stimulusMarkersMap"],["label","Markers Generation"],[1,"margin-top-large"],[3,"stimulusMarkersMapData","stimulusMarkersMap","stimulusCommandMap"],["label","Neurofeedback & Runtime Events"],[3,"commandRegistryMap","stimulusCommandMap","hardwareIP"],["label","Specification"],[3,"stimulusMarkersMapData","experimentConfig","stimuli_delivery_link"]],template:function(s,e){if(s&1){let o=w();t(0,"div",null,0)(2,"h1",3),d(3),a(),l(4,"p",4),t(5,"div",5)(6,"div")(7,"h2",3),d(8,"Objective"),a(),l(9,"p",4),a(),t(10,"div")(11,"h2",3),d(12,"Procedure"),a(),l(13,"p",4),a()(),C(14,se,1,1,"app-diagram",6),l(15,"mat-divider"),t(16,"mat-tab-group",7,1)(18,"mat-tab",8),l(19,"div",9),t(20,"app-inputs",10,2),v("valueChange",function(m){return c(o),b(e.onFormValueChange(m))}),a(),l(22,"div",11),t(23,"p",12)(24,"span")(25,"b"),d(26,"Direct experiment link:"),a()(),t(27,"a",13),d(28),a(),t(29,"button",14)(30,"mat-icon"),d(31,"content_copy"),a()()(),t(32,"button",15),v("click",function(){return c(o),b(e.loadDefaultValues())}),d(33,"Load Default Values"),a(),t(34,"app-stimuli",16),v("commandRegistry",function(m){return c(o),b(e.setCommandRegistry(m))}),a()(),t(35,"mat-tab",17),l(36,"div",18),t(37,"app-markers",19),v("stimulusMarkersMapData",function(m){return c(o),b(e.setStimulusMarkersMapData(m))})("stimulusMarkersMap",function(m){return c(o),b(e.setStimulusMarkersMap(m))}),a()(),t(38,"mat-tab",20),l(39,"app-layout-commands",21),a(),t(40,"mat-tab",22),l(41,"div",18)(42,"app-specification",23),a()()()}s&2&&(i(3),D(e.experiment.name),i(),r("innerHTML",e.experiment.description,g),i(5),r("innerHTML",e.experiment.objective,g),i(4),r("innerHTML",e.experiment.procedure,g),i(),k(e.diagram()?14:-1),i(6),r("config",e.formField)("columns",e.columns)("storageKey",e.storageKey),i(2),r("innerHTML",e.summary(),g),i(5),r("href",x("",e.currentUrl,"",e.getFullWindowLink("/stimuli")),M),i(),P(" ",e.currentUrl,"",e.getFullWindowLink("/stimuli")," "),i(),r("cdkCopyToClipboard",e.currentUrl+e.getFullWindowLink("/stimuli")),i(5),r("experimentConfig",e.formData())("embedded","embedded")("stimulusCommandMap",e.stimulusCommandMap)("stimulusMarkersMap",e.stimulusMarkersMap),i(3),r("stimulusCommandMap",e.stimulusCommandMap),i(2),r("commandRegistryMap",e.commandRegistry)("stimulusCommandMap",e.stimulusCommandMap)("hardwareIP",e.hardwareService.hardwareIP()),i(3),r("stimulusMarkersMapData",e.stimulusMarkersMapData)("experimentConfig",e.formData)("stimuli_delivery_link",e.currentUrl+e.getFullWindowLink("/stimuli")))},dependencies:[ae,I,U,z,$,j,X,V,F,R,J,q,Q,Y,W,G,A,ee,Z,ie],encapsulation:2})};export{re as P300Speller};
