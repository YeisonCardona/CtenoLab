import{c as _}from"./chunk-4PHGQJCB.js";import{a as L,b as O,c as E,d as D}from"./chunk-LMDFHJ7Z.js";import{k as R}from"./chunk-2X46YHVJ.js";import{b as w,c as S}from"./chunk-XRGWM46W.js";import{b as x}from"./chunk-EBVX5MXQ.js";import{Ab as T,Bb as a,Cb as o,Mb as b,Sa as r,Yb as y,_b as M,ac as I,db as p,hb as g,ra as m,tb as f,ua as d,wb as h,yb as v,zb as C}from"./chunk-JNWBK6C6.js";import{i as l,j as c,k as u}from"./chunk-GV7GV3NK.js";function B(s,e){if(s&1&&(a(0,"mat-icon",3,0),M(2),o()),s&2){let t=e.$implicit,i=b();y("visible",i.showIcon()[t.class]),f("cue-key",i.fixClass(t.class)),r(2),I("",t.value," ")}}var n=class n extends E{showIcon=m(Object.fromEntries(this.cues().map(e=>[e.class,!1])));fullWindowLink="/paradigms/p300/auditory-oddball/stimuli";normalWindowLink="/paradigms/p300/auditory-oddball";startCountdownValue=5;allowModes=["sequential"];ngOnInit(){return u(this,null,function*(){c(n.prototype,this,"ngOnInit").call(this),yield this.hardwareService.writeLine("CMD=@CLA;"),yield this.hardwareService.writeLine('CMD=@TITLE TEXT="Auditory Oddball P300" COLOR=BLUE SIZE=3;')})}generateCues(){this.cues.set([{class:"Target",value:"ear_sound"},{class:"NonTarget",value:"ear_sound"}])}generateTrials(){let e=[],t=Math.floor(this.experimentConfig.target_probability*this.experimentConfig.total_trials/100);for(let i=0;i<t;i++)e.push({class:"Target",duration:this.experimentConfig.stimulus_duration,soa:this.randomIntInRange(this.experimentConfig.soa)});for(let i=e.length;i<this.experimentConfig.total_trials;i++)e.push({class:"NonTarget",duration:this.experimentConfig.stimulus_duration,soa:this.randomIntInRange(this.experimentConfig.soa)});return e=this.shuffle(e),e}showTrial(e){this.propagateClassMarker(e),this.showIcon.set(Object.fromEntries(this.cues().map(t=>[t.class,t.class===e])))}onTrial(e){e.class==="Target"?this.hardwareService.writeLine(`CMD=@BIP FREQ=2000 DURATION=${e.duration} VOLUME=92;`):e.class==="NonTarget"&&this.hardwareService.writeLine(`CMD=@BIP FREQ=1000 DURATION=${e.duration} VOLUME=128;`)}stopStimuliSequence(){this.showTrial(null)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=d(n)))(i||n)}})();static \u0275cmp=p({type:n,selectors:[["app-stimuli"]],features:[g],decls:3,vars:1,consts:[["cueElement",""],[3,"hostRef"],[1,"center","cue","conditional-visible",3,"visible"],[1,"center","cue","conditional-visible"]],template:function(t,i){t&1&&(a(0,"app-stimuli-layout",1),v(1,B,3,4,"mat-icon",2,h),o()),t&2&&(T("hostRef",i),r(),C(i.cues()))},dependencies:[S,w,L,x,_,R,D],styles:[".cue[_ngcontent-%COMP%]{color:var(--mat-sys-primary);width:1em;height:1em;font-size:20vh}.conditional-visible[_ngcontent-%COMP%]{opacity:0;visibility:hidden;pointer-events:none}.conditional-visible.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible;pointer-events:auto}"]})};l([O("TRIAL",{arguments:["CLASS"],example:"Trial Target",description:"Highlights the specified class by activating its visual icon while deactivating all others. Useful for indicating the target class during a trial or cue presentation."})],n.prototype,"showTrial",1);var P=n;export{P as a};
