import{a as te}from"./chunk-D26WBASB.js";import{a as Q,b as Z,c as ne}from"./chunk-PO2GA6UA.js";import{b as ie,c as ae}from"./chunk-CLRYXWNA.js";import"./chunk-OWSNVMTI.js";import{g as re,h as oe,i as le,j as me,k as se,l as de,m as ce,n as pe,o as ue,p as be,q as fe}from"./chunk-GEYP3GVJ.js";import"./chunk-V3KTDLLC.js";import"./chunk-MKG7IB6M.js";import"./chunk-WUD4HGYV.js";import"./chunk-C5MP6677.js";import{c as ee}from"./chunk-A2A35ACL.js";import"./chunk-HNOTP6PA.js";import"./chunk-6GID3F7O.js";import{a as W,b as X,f as J}from"./chunk-6LM54VFH.js";import"./chunk-ZOZSFTET.js";import"./chunk-UAQ7UU4Y.js";import{a as Y,b as G}from"./chunk-M5Y3KVA3.js";import"./chunk-A7PT7FEX.js";import{b as O}from"./chunk-GB5JM2T7.js";import"./chunk-XP57CNC4.js";import"./chunk-4ULVSNUU.js";import{b as N}from"./chunk-XSAIEII5.js";import"./chunk-3C6VJBNL.js";import{b as z}from"./chunk-62AV6QVL.js";import"./chunk-7J34S6W5.js";import"./chunk-KHEHVW2Y.js";import"./chunk-7Q5CT564.js";import"./chunk-75WOWH2T.js";import"./chunk-6Q6ZBUD2.js";import"./chunk-NXQCXCLR.js";import{a as $,c as F}from"./chunk-HFDRJSGA.js";import{j as q,l as K,m as P,o as j}from"./chunk-RPD344RW.js";import{m as L}from"./chunk-IAEIATSC.js";import{$b as V,Ab as s,Bb as t,Cb as i,Db as c,Eb as b,Fb as f,Hb as R,Lb as E,Mb as C,Pa as _,Qa as w,Sa as l,Wb as H,Xa as h,_b as e,ac as p,bc as S,db as M,ga as v,gc as B,ha as x,hb as I,jb as d,sc as A,wb as D,yb as k,zb as U}from"./chunk-P6GYV7WW.js";import"./chunk-HVQDNULJ.js";function ye(a,o){a&1&&(t(0,"th",32),e(1," Class "),i())}function ve(a,o){if(a&1&&(t(0,"td",33),e(1),i()),a&2){let n=o.$implicit;l(),p(" ",n.class," ")}}function xe(a,o){a&1&&(t(0,"th",32),e(1," Key "),i())}function Ee(a,o){if(a&1&&(t(0,"td",33)(1,"code"),e(2),i()()),a&2){let n=o.$implicit;l(2),p("'",n.command,"'")}}function Se(a,o){a&1&&(t(0,"th",32),e(1," Command "),i())}function _e(a,o){if(a&1&&(t(0,"td",33)(1,"code"),e(2),i()()),a&2){let n=o.$implicit;l(2),p("EVT=KEY ",n.command,";")}}function Ce(a,o){a&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Te(a,o){if(a&1&&(t(0,"td",33),e(1),i()),a&2){let n=o.$implicit,m=C();l(),S(" http://",m.hardwareService.hardwareIP(),"/?c=EVT=KEY ",n.command,"; ")}}function we(a,o){a&1&&c(0,"tr",34)}function Me(a,o){a&1&&c(0,"tr",35)}function Ie(a,o){a&1&&(t(0,"th",32),e(1," Command "),i())}function De(a,o){if(a&1&&(t(0,"td",33),e(1),i()),a&2){let n=o.$implicit;l(),p(" ",n.command," ")}}function ke(a,o){a&1&&(t(0,"th",32),e(1," Arguments "),i())}function Ue(a,o){if(a&1&&(t(0,"td",33)(1,"code"),e(2),i()()),a&2){let n=o.$implicit;l(2),p("[",n.arguments,"]")}}function Re(a,o){a&1&&(t(0,"th",32),e(1," Example "),i())}function He(a,o){if(a&1&&(t(0,"td",33)(1,"code"),e(2),i()()),a&2){let n=o.$implicit;l(2),p("EVT=SET ",n.example)}}function Ve(a,o){a&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Be(a,o){if(a&1&&(t(0,"td",33),e(1),i()),a&2){let n=o.$implicit,m=C();l(),S(" http://",m.hardwareService.hardwareIP(),"/?c=EVT=SET ",n.example,"; ")}}function Ae(a,o){a&1&&c(0,"tr",34)}function Le(a,o){a&1&&c(0,"tr",35)}function $e(a,o){if(a&1&&(t(0,"b"),e(1),i(),e(2),c(3,"br")),a&2){let n=o.$implicit;l(),p("",n.command,": "),l(),p(" ",n.description)}}var ge=class a extends ne{constructor(n,m,r,g,y,u,T){super(n,m,r,g,y);this.navigationService=u;this.breadcrumbService=T;this.navigationService.setActiveLink("/experiments/motor-imagery/unilateral"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Experiments",url:"/experiments"},{label:"Motor Imagery",url:"/experiments/motor-imagery"},{label:"Unilateral Motor Imagery",url:"/experiments/motor-imagery/unilateral"}])}requieredTier="Basic";storageKey="unilateral-motor-imagery";resetValues(){this.formData.set({classes:["Right","Left"],trials_per_class:20,stimulus_duration:4e3,soa:[1e3,2e3]})}summary=A(()=>{let n=this.formData();if(!n||Object.keys(n).length===0)return"";let m=[],r=n.classes?.length*n.trials_per_class||0,g=(n.soa?.[0]+n.soa?.[1])/2,y=n.soa?.[1]-n.soa?.[0],u=Math.round((n.stimulus_duration+g)*r/6e4);r>200&&m.push("The total number of trials exceeds 200. This may lead to participant fatigue."),u>30&&m.push("Estimated experiment duration exceeds 30 minutes. Consider reducing trials or stimulus duration."),(n.soa?.[0]??1e3)<300&&m.push("The minimum SOA is below 500 ms. This may not provide sufficient recovery time between trials."),y<500&&m.push("SOA range is too narrow. Randomization may be imperceptible and timing may not vary meaningfully across trials."),(!n.classes?.length||n.classes?.length===1)&&m.push("At least two motor imagery classes are required for meaningful classification and comparison.");let T=m.length?`<p class="warning"><b>\u26A0\uFE0F Warnings:</b><br>${m.map(he=>`\u2022 ${he}`).join("<br>")}</p>`:"";return`
    <p class="summary-block">
      <b>Selected classes</b>: ${n.classes?.join(", ")||"\u2014"}<br>
      <b>Total trials</b>: ${r}
      (${n.trials_per_class} per class \xD7 ${n.classes?.length||0} classes)<br>
      <b>Stimulus duration</b>: ${n.stimulus_duration} ms<br>
      <b>SOA</b>: ${n.soa?.[0]}\u2013${n.soa?.[1]} ms<br>
      <b>Estimated duration</b>: ${u} min
    </p>
    ${T}
  `});experiment={name:"Unilateral Motor Imagery",description:"This experiment focuses on the <b>mental rehearsal of movement</b> involving a <b>single limb</b>\u2014typically the left or right hand\u2014without any actual muscular activity. It is designed to evaluate the ability to generate <b>consistent</b> and <b>classifiable brain signals</b> through motor imagery alone. <b>Unilateral motor imagery</b> is widely used in <b>brain-computer interface (BCI) research</b> due to its simplicity, <b>well-defined cortical activation patterns</b>, and effectiveness in training <b>neural decoding algorithms</b>.",metadata:{type:"Unilateral",paradigm:"Endogenous",stimulus_type:"Visual",recording_modality:"EEG",difficulty_level:"Moderate",class_range:{min:2,max:4}},objective:"The objective of this experiment is to assess the capacity to voluntarily modulate <b>sensorimotor rhythms (SMRs)</b> through the imagined movement of a <b>single limb</b>, typically the <b>left or right hand</b>. By isolating <b>unilateral motor imagery</b>, it becomes possible to identify <b>specific cortical activation patterns</b> using <b>non-invasive EEG</b> recordings. These patterns serve as the basis for evaluating the feasibility of <b>decoding motor intentions</b> in BCI applications.",hypothesis:"<b>Unilateral motor imagery</b> of a single hand is expected to produce <b>distinct and repeatable modulations</b> in the <b>mu and beta frequency bands</b> over the <b>contralateral sensorimotor cortex</b>. These changes are detectable via <b>EEG</b> and can be used to <b>classify mental states</b> associated with left or right hand motor imagery, facilitating the development of <b>accurate and robust BCI control strategies</b>.",procedure:"Participants are seated in a <b>controlled environment</b> and equipped with <b>EEG recording hardware</b>. Each trial begins with a <b>fixation cross</b> displayed at the center of the screen, followed by a <b>visual cue</b> (e.g., a directional arrow) indicating the limb to be imagined. The task involves <b>kinesthetic imagination</b> of movement (e.g., grasping or rotation) <b>without actual muscle contraction</b>. Each imagery period lasts <b>4 to 6 seconds</b>, followed by a <b>rest interval</b>. The protocol is repeated across <b>multiple trials</b> to ensure data sufficiency and reliability. The full session typically lasts <b>20 to 40 minutes</b>, depending on the number of blocks and conditions.",requirements:"The experiment requires a <b>modern web browser</b> capable of rendering visual stimuli with <b>precise timing</b> (e.g., Chrome or Firefox). For EEG-based setups, the system must support <b>synchronized stimulus presentation</b> and integration with <b>external acquisition hardware</b> via <b>serial, WebUSB</b>, or <b>network protocols</b>. Participants should be familiarized with <b>motor imagery strategies</b> and perform the task in a <b>quiet, distraction-free setting</b>. Optional enhancements include <b>real-time feedback</b> and <b>quality monitoring tools</b>.",characteristics:"This experiment is categorized as <b>endogenous</b> because it depends entirely on the participant\u2019s <b>internal cognitive processes</b>, specifically <b>voluntary motor imagery</b>. It is also defined as <b>unilateral</b>, since each trial involves the imagination of a movement involving only one limb, enabling <b>clear separation of cortical activation patterns</b> and simplified classification for BCI systems."};stimulusCommandMap={Right:["R","r"],Left:["L","l"],Up:["U","u"],Down:["D","d"],Rest:["S","s"]};formField=[{type:"checkbox",key:"classes",label:"Motor Imagery Classes",value:["Right","Left"],options:["Right","Left","Up","Down","Rest"],hint:"Select the classes to include in the experiment."},{type:"slider",key:"trials_per_class",label:"Trials per Class",value:20,min:1,max:100,step:1,suffix:" trials",hint:"Number of repetitions per selected class."},{type:"slider",key:"stimulus_duration",label:"Stimulus Duration",value:4e3,min:100,max:1e4,step:100,suffix:" ms",hint:"Time each stimulus is shown."},{type:"range",key:"soa",label:"SOA (Stimulus Onset Asynchrony)",value:[1e3,2e3],min:0,max:5e3,step:100,suffix:" ms",hint:"Time between stimuli, randomized between min and max."}];static \u0275fac=function(m){return new(m||a)(h($),h(F),h(N),h(ee),h(O),h(Y),h(G))};static \u0275cmp=M({type:a,selectors:[["app-unilateral"]],features:[I],decls:150,vars:24,consts:[["taskPanel",""],["tabGroup",""],["formComponent",""],[1,"no-margin-bottom"],[1,"align-justify",3,"innerHTML"],["dynamicHeight","","mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","Stimuli Delivery"],[1,"margin-bottom-small"],[3,"valueChange","config","columns","storageKey"],[1,"margin-top-large",3,"innerHTML"],[1,"flex-row","flex-row-left"],[1,"elipsis-96",3,"href"],["matIconButton","",3,"cdkCopyToClipboard"],["matButton","filled",1,"margin-top-large","margin-bottom-large",3,"click"],[3,"commandRegistry","experimentConfig","embeded","stimulusCommandMap"],["label","Neurofeedback & Runtime Events"],[1,"margin-top-large"],["mat-table","",3,"dataSource"],["matColumnDef","class"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","command"],["matColumnDef","complete_command"],["matColumnDef","http_request"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","arguments"],["matColumnDef","example"],[1,""],["label","Experiment Context"],[3,"experiment"],["matFab","","extended","",1,"margin-top-large","button-configure","margin-bottom-medium","margin-left-small","mat-elevation-z1",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(m,r){if(m&1){let g=R();t(0,"div",null,0)(2,"h1",3),e(3),i(),c(4,"p",4),t(5,"mat-tab-group",5,1)(7,"mat-tab",6),c(8,"div",7),t(9,"app-inputs",8,2),E("valueChange",function(u){return v(g),x(r.onFormValueChange(u))}),i(),c(11,"div",9),t(12,"p",10)(13,"span")(14,"b"),e(15,"Direct experiment link:"),i()(),t(16,"a",11),e(17),i(),t(18,"button",12)(19,"mat-icon"),e(20,"content_copy"),i()()(),t(21,"button",13),E("click",function(){return v(g),x(r.loadDefaultValues())}),e(22,"Load Default Values"),i(),t(23,"app-stimuli",14),E("commandRegistry",function(u){return v(g),x(r.setCommandRegistry(u))}),i()(),t(24,"mat-tab",15)(25,"h2",16),e(26,"Class Events for Neurofeedback Loop (EVT=KEY)"),i(),t(27,"p"),e(28," The commands listed below represent the "),t(29,"b"),e(30,"standard control classes"),i(),e(31," required to properly close the loop in "),t(32,"b"),e(33,"neurofeedback paradigms"),i(),e(34," or "),t(35,"b"),e(36,"inference-driven visual feedback experiments"),i(),e(37,". It is the responsibility of the user to implement the real-time signal processing, perform the classification or inference, and send the corresponding command back to the visualization system. "),i(),t(38,"p"),e(39," Each class is associated with a specific key that must be sent using the event format: "),t(40,"b")(41,"code"),e(42,"EVT=KEY <char>;"),i()(),c(43,"br"),e(44," For example: "),t(45,"code"),e(46,"EVT=KEY R;"),i(),e(47," or "),t(48,"code"),e(49,"EVT=KEY d;"),i(),e(50,". "),i(),t(51,"p"),e(52," This standard interface ensures seamless communication with the stimulus engine, allowing any external system (e.g., EEG decoder, BCI classifier, or embedded inference device) to "),t(53,"b"),e(54,"deliver neurofeedback events"),i(),e(55," reliably and in real time. "),i(),t(56,"table",17),b(57,18),d(58,ye,2,0,"th",19)(59,ve,2,1,"td",20),f(),b(60,21),d(61,xe,2,0,"th",19)(62,Ee,3,1,"td",20),f(),b(63,22),d(64,Se,2,0,"th",19)(65,_e,3,1,"td",20),f(),b(66,23),d(67,Ce,2,0,"th",19)(68,Te,2,2,"td",20),f(),d(69,we,1,0,"tr",24)(70,Me,1,0,"tr",25),i(),t(71,"h3"),e(72,"Neurofeedback Control via HTTP"),i(),t(73,"p"),e(74," In a neurofeedback loop, you can trigger class-specific events by sending standard HTTP commands to the Cardputer. Each class is represented by a character (e.g., "),t(75,"code"),e(76,"R"),i(),e(77,", "),t(78,"code"),e(79,"L"),i(),e(80,", "),t(81,"code"),e(82,"U"),i(),e(83,", "),t(84,"code"),e(85,"D"),i(),e(86,", "),t(87,"code"),e(88,"S"),i(),e(89,"), and the system will emit a corresponding serial event such as "),t(90,"code"),e(91,"EVT=KEY\xA0L;"),i(),e(92,". "),i(),t(93,"p"),e(94," To simulate a key event without requiring physical input, send a request in the following format: "),i(),t(95,"pre")(96,"code"),e(97),t(98,"strong"),e(99,"X"),i(),e(100,";"),i()(),t(101,"p"),e(102," Here, "),t(103,"strong"),e(104,"X"),i(),e(105," is the character representing the intended class. This virtual key event will be processed identically to a real key press. "),i(),t(106,"p"),e(107," You can also chain multiple commands in a single request using semicolons: "),i(),t(108,"pre")(109,"code"),e(110),i()(),t(111,"p"),e(112," Upon processing, the Cardputer sends serial output messages like "),t(113,"code"),e(114,"EVT=KEY\xA0X;"),i(),e(115,", enabling real-time synchronization with inference engines or feedback systems. "),i(),t(116,"h2",16),e(117,"Runtime Configuration Events (EVT=SET)"),i(),t(118,"p"),e(119," Below is a list of supported runtime commands available through the "),t(120,"code"),e(121,"EVT=SET"),i(),e(122," mechanism. These commands allow the experiment to adapt dynamically to user input, classifier output, or external triggers. Each command includes a set of expected arguments and can be issued via HTTP or serial communication. "),i(),t(123,"table",17),b(124,21),d(125,Ie,2,0,"th",19)(126,De,2,1,"td",20),f(),b(127,26),d(128,ke,2,0,"th",19)(129,Ue,3,1,"td",20),f(),b(130,27),d(131,Re,2,0,"th",19)(132,He,3,1,"td",20),f(),b(133,23),d(134,Ve,2,0,"th",19)(135,Be,2,2,"td",20),f(),d(136,Ae,1,0,"tr",24)(137,Le,1,0,"tr",25),i(),t(138,"p",28),e(139," These commands are processed in real time by the visualization engine and can be used to finely control stimulus behavior in response to decoding events, user interactions, or adaptive experimental logic. "),i(),t(140,"p"),k(141,$e,4,2,null,null,D),i()(),t(143,"mat-tab",29),c(144,"div",16)(145,"app-experiment",30),t(146,"button",31),E("click",function(){v(g);let u=H(6);return x(u.selectedIndex=1)}),t(147,"mat-icon"),e(148,"build"),i(),e(149," Configure this experiment "),i()()()()}m&2&&(l(3),V(r.experiment.name),l(),s("innerHTML",r.experiment.description,_),l(5),s("config",r.formField)("columns",r.columns)("storageKey",r.storageKey),l(2),s("innerHTML",r.summary(),_),l(5),s("href",B("",r.currentUrl,"",r.getFullWindowLink("/stimuli")),w),l(),S(" ",r.currentUrl,"",r.getFullWindowLink("/stimuli")," "),l(),s("cdkCopyToClipboard",r.currentUrl+r.getFullWindowLink("/stimuli")),l(5),s("experimentConfig",r.formData())("embeded","embeded")("stimulusCommandMap",r.stimulusCommandMap),l(33),s("dataSource",r.toDataSource(r.stimulusCommandMap)),l(13),s("matHeaderRowDef",r.displayedColumnsCommandMap),l(),s("matRowDefColumns",r.displayedColumnsCommandMap),l(27),p("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0"),l(13),p("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0L;CMD=BIP;"),l(13),s("dataSource",r.commandRegistry),l(13),s("matHeaderRowDef",r.displayedColumnsCommandRegistry),l(),s("matRowDefColumns",r.displayedColumnsCommandRegistry),l(4),U(r.commandRegistry),l(4),s("experiment",r.experiment))},dependencies:[L,Q,J,W,X,P,z,Z,j,K,q,te,ae,ie,fe,re,le,ce,me,oe,pe,se,de,ue,be],encapsulation:2})};export{ge as MotorImageryUnilateral};
