import{a as Q,b as Z,c as ne}from"./chunk-PO2GA6UA.js";import{b as te,c as ie}from"./chunk-CLRYXWNA.js";import"./chunk-OWSNVMTI.js";import{g as ae,h as re,i as oe,j as le,k as me,l as se,m as de,n as ce,o as pe,p as ue,q as be}from"./chunk-GEYP3GVJ.js";import"./chunk-V3KTDLLC.js";import"./chunk-MKG7IB6M.js";import"./chunk-WUD4HGYV.js";import{a as fe}from"./chunk-F5IZ624O.js";import"./chunk-C5MP6677.js";import{c as ee}from"./chunk-A2A35ACL.js";import"./chunk-HNOTP6PA.js";import"./chunk-6GID3F7O.js";import{a as W,b as X,f as J}from"./chunk-6LM54VFH.js";import"./chunk-ZOZSFTET.js";import"./chunk-UAQ7UU4Y.js";import{a as G,b as U}from"./chunk-M5Y3KVA3.js";import"./chunk-A7PT7FEX.js";import{b as O}from"./chunk-GB5JM2T7.js";import"./chunk-XP57CNC4.js";import"./chunk-4ULVSNUU.js";import{b as N}from"./chunk-XSAIEII5.js";import"./chunk-3C6VJBNL.js";import{b as Y}from"./chunk-62AV6QVL.js";import"./chunk-7J34S6W5.js";import"./chunk-KHEHVW2Y.js";import"./chunk-7Q5CT564.js";import"./chunk-75WOWH2T.js";import"./chunk-6Q6ZBUD2.js";import"./chunk-NXQCXCLR.js";import{a as q,c as F}from"./chunk-HFDRJSGA.js";import{j as K,l as P,m as j,o as z}from"./chunk-RPD344RW.js";import{m as $}from"./chunk-IAEIATSC.js";import{$b as V,Ab as s,Bb as t,Cb as i,Db as c,Eb as b,Fb as f,Hb as R,Lb as E,Mb as k,Pa as _,Qa as T,Sa as l,Wb as H,Xa as h,_b as e,ac as p,bc as S,db as w,ga as x,gc as A,ha as v,hb as M,jb as d,sc as L,wb as I,yb as B,zb as D}from"./chunk-P6GYV7WW.js";import"./chunk-HVQDNULJ.js";function ye(n,o){n&1&&(t(0,"th",32),e(1," Class "),i())}function xe(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit;l(),p(" ",a.class," ")}}function ve(n,o){n&1&&(t(0,"th",32),e(1," Key "),i())}function Ee(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),p("'",a.command,"'")}}function Se(n,o){n&1&&(t(0,"th",32),e(1," Command "),i())}function _e(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),p("EVT=KEY ",a.command,";")}}function ke(n,o){n&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Ce(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit,m=k();l(),S(" http://",m.hardwareService.hardwareIP(),"/?c=EVT=KEY ",a.command,"; ")}}function Te(n,o){n&1&&c(0,"tr",34)}function we(n,o){n&1&&c(0,"tr",35)}function Me(n,o){n&1&&(t(0,"th",32),e(1," Command "),i())}function Ie(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit;l(),p(" ",a.command," ")}}function Be(n,o){n&1&&(t(0,"th",32),e(1," Arguments "),i())}function De(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),p("[",a.arguments,"]")}}function Re(n,o){n&1&&(t(0,"th",32),e(1," Example "),i())}function He(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),p("EVT=SET ",a.example)}}function Ve(n,o){n&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Ae(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit,m=k();l(),S(" http://",m.hardwareService.hardwareIP(),"/?c=EVT=SET ",a.example,"; ")}}function Le(n,o){n&1&&c(0,"tr",34)}function $e(n,o){n&1&&c(0,"tr",35)}function qe(n,o){if(n&1&&(t(0,"b"),e(1),i(),e(2),c(3,"br")),n&2){let a=o.$implicit;l(),p("",a.command,": "),l(),p(" ",a.description)}}var ge=class n extends ne{constructor(a,m,r,g,y,u,C){super(a,m,r,g,y);this.navigationService=u;this.breadcrumbService=C;this.navigationService.setActiveLink("/experiments/motor-imagery/blocked"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Experiments",url:"/experiments"},{label:"Motor Imagery",url:"/experiments/motor-imagery"},{label:"Blocked Motor Imagery",url:"/experiments/motor-imagery/blocked"}])}requieredTier="Hobbyist";storageKey="blocked-motor-imagery";resetValues(){this.formData.set({classes:["Right","Left"],trials_per_class:20,stimulus_duration:4e3,soa:[1e3,2e3]})}summary=L(()=>{let a=this.formData();if(!a||Object.keys(a).length===0)return"";let m=[],r=a.classes?.length*a.trials_per_class||0,g=(a.soa?.[0]+a.soa?.[1])/2,y=a.soa?.[1]-a.soa?.[0],u=Math.round((a.stimulus_duration+g)*r/6e4);r>200&&m.push("The total number of trials exceeds 200. This may lead to participant fatigue."),u>30&&m.push("Estimated experiment duration exceeds 30 minutes. Consider reducing trials or stimulus duration."),(a.soa?.[0]??1e3)<300&&m.push("The minimum SOA is below 500 ms. This may not provide sufficient recovery time between trials."),y<500&&m.push("SOA range is too narrow. Randomization may be imperceptible and timing may not vary meaningfully across trials."),(!a.classes?.length||a.classes?.length===1)&&m.push("At least two motor imagery classes are required for meaningful classification and comparison.");let C=m.length?`<p class="warning"><b>\u26A0\uFE0F Warnings:</b><br>${m.map(he=>`\u2022 ${he}`).join("<br>")}</p>`:"";return`
    <p class="summary-block">
      <b>Selected classes</b>: ${a.classes?.join(", ")||"\u2014"}<br>
      <b>Total trials</b>: ${r}
      (${a.trials_per_class} per class \xD7 ${a.classes?.length||0} classes)<br>
      <b>Stimulus duration</b>: ${a.stimulus_duration} ms<br>
      <b>SOA</b>: ${a.soa?.[0]}\u2013${a.soa?.[1]} ms<br>
      <b>Estimated duration</b>: ${u} min
    </p>
    ${C}
  `});experiment={name:"Blocked Motor Imagery",description:"This experiment explores the <b>mental rehearsal of movement</b> presented in <b>structured, homogeneous blocks</b> rather than random sequences. Each block consists of <b>repeated motor imagery trials</b> of a single class\u2014such as imagining only left-hand movement\u2014before transitioning to the next block. This <b>blocked presentation</b> facilitates the analysis of <b>within-class stability</b> and the impact of task repetition on <b>neural modulations</b> in EEG signals.",metadata:{type:"Blocked",paradigm:"Endogenous",stimulus_type:"Visual",recording_modality:"EEG",difficulty_level:"Moderate",class_range:{min:2,max:4}},objective:"The objective of this experiment is to investigate how <b>repeated trials of the same motor imagery class</b> affect the consistency and quality of <b>sensorimotor EEG signals</b>. By grouping tasks in blocks, the design enables an analysis of <b>intra-class temporal stability</b> and potential changes in <b>neural engagement or fatigue</b> over time.",hypothesis:"<b>Blocked presentation</b> of motor imagery trials is expected to yield <b>more stable and stereotyped neural patterns</b> for each class, as compared to randomized sequences. However, repetition may also induce <b>habituation</b> or <b>declining attentional engagement</b>, which will be reflected in reduced EEG power changes over time within blocks.",procedure:"Participants are placed in a <b>quiet environment</b> and fitted with <b>EEG acquisition hardware</b>. Each block consists of <b>multiple trials</b> of the same motor imagery task (e.g., right-hand grasping). A <b>fixation cross</b> is presented, followed by a <b>visual instruction cue</b>. The participant performs <b>kinesthetic imagination</b> of the specified movement for <b>4 to 6 seconds</b>, followed by a rest period. After completing all trials in a block, a new class is introduced. The order of blocks is counterbalanced or fixed depending on the research design.",requirements:"This experiment requires a <b>modern browser</b> capable of high-precision timing and <b>visual stimulus rendering</b>. EEG setups must support <b>multi-class labeling</b> and <b>continuous acquisition</b>. Integration with hardware must occur via <b>WebUSB</b>, <b>serial</b>, or <b>network</b> protocols. Participants should be instructed in <b>motor imagery techniques</b> and allowed time for practice before the session. <b>Optional feedback or breaks</b> between blocks can be implemented to prevent mental fatigue.",characteristics:"This task is <b>endogenous</b>, driven by internal intention rather than external triggers. It employs a <b>blocked design</b> to minimize cognitive switching and maximize signal repeatability, making it especially useful for <b>model calibration</b> and <b>early-stage BCI training</b> where signal reliability is critical."};stimulusCommandMap={Right:["R","r"],Left:["L","l"],Up:["U","u"],Down:["D","d"],Rest:["R","r"," "]};formField=[{type:"checkbox",key:"classes",label:"Motor Imagery Classes",value:["Right","Left"],options:["Right","Left","Up","Down","Rest"],hint:"Select the classes to include in the experiment."},{type:"slider",key:"trials_per_class",label:"Trials per Class",value:20,min:1,max:100,step:1,suffix:" trials",hint:"Number of repetitions per selected class."},{type:"slider",key:"stimulus_duration",label:"Stimulus Duration",value:4e3,min:100,max:1e4,step:100,suffix:" ms",hint:"Time each stimulus is shown."},{type:"range",key:"soa",label:"SOA (Stimulus Onset Asynchrony)",value:[1e3,2e3],min:0,max:5e3,step:100,suffix:" ms",hint:"Time between stimuli, randomized between min and max."}];static \u0275fac=function(m){return new(m||n)(h(q),h(F),h(N),h(ee),h(O),h(G),h(U))};static \u0275cmp=w({type:n,selectors:[["app-blocked"]],features:[M],decls:150,vars:24,consts:[["taskPanel",""],["tabGroup",""],["formComponent",""],[1,"no-margin-bottom"],[1,"align-justify",3,"innerHTML"],["dynamicHeight","","mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","Stimuli Delivery"],[1,"margin-bottom-small"],[3,"valueChange","config","columns","storageKey"],[1,"margin-top-large",3,"innerHTML"],[1,"flex-row","flex-row-left"],[1,"elipsis-96",3,"href"],["matIconButton","",3,"cdkCopyToClipboard"],["matButton","filled",1,"margin-top-large","margin-bottom-large",3,"click"],[3,"commandRegistry","experimentConfig","embeded","stimulusCommandMap"],["label","Neurofeedback & Runtime Events"],[1,"margin-top-large"],["mat-table","",3,"dataSource"],["matColumnDef","class"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","command"],["matColumnDef","complete_command"],["matColumnDef","http_request"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","arguments"],["matColumnDef","example"],[1,""],["label","Experiment Context"],[3,"experiment"],["matFab","","extended","",1,"margin-top-large","button-configure","margin-bottom-medium","margin-left-small","mat-elevation-z1",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(m,r){if(m&1){let g=R();t(0,"div",null,0)(2,"h1",3),e(3),i(),c(4,"p",4),t(5,"mat-tab-group",5,1)(7,"mat-tab",6),c(8,"div",7),t(9,"app-inputs",8,2),E("valueChange",function(u){return x(g),v(r.onFormValueChange(u))}),i(),c(11,"div",9),t(12,"p",10)(13,"span")(14,"b"),e(15,"Direct experiment link:"),i()(),t(16,"a",11),e(17),i(),t(18,"button",12)(19,"mat-icon"),e(20,"content_copy"),i()()(),t(21,"button",13),E("click",function(){return x(g),v(r.loadDefaultValues())}),e(22,"Load Default Values"),i(),t(23,"app-stimuli",14),E("commandRegistry",function(u){return x(g),v(r.setCommandRegistry(u))}),i()(),t(24,"mat-tab",15)(25,"h2",16),e(26,"Class Events for Neurofeedback Loop (EVT=KEY)"),i(),t(27,"p"),e(28," The commands listed below represent the "),t(29,"b"),e(30,"standard control classes"),i(),e(31," required to properly close the loop in "),t(32,"b"),e(33,"neurofeedback paradigms"),i(),e(34," or "),t(35,"b"),e(36,"inference-driven visual feedback experiments"),i(),e(37,". It is the responsibility of the user to implement the real-time signal processing, perform the classification or inference, and send the corresponding command back to the visualization system. "),i(),t(38,"p"),e(39," Each class is associated with a specific key that must be sent using the event format: "),t(40,"b")(41,"code"),e(42,"EVT=KEY <char>;"),i()(),c(43,"br"),e(44," For example: "),t(45,"code"),e(46,"EVT=KEY R;"),i(),e(47," or "),t(48,"code"),e(49,"EVT=KEY d;"),i(),e(50,". "),i(),t(51,"p"),e(52," This standard interface ensures seamless communication with the stimulus engine, allowing any external system (e.g., EEG decoder, BCI classifier, or embedded inference device) to "),t(53,"b"),e(54,"deliver neurofeedback events"),i(),e(55," reliably and in real time. "),i(),t(56,"table",17),b(57,18),d(58,ye,2,0,"th",19)(59,xe,2,1,"td",20),f(),b(60,21),d(61,ve,2,0,"th",19)(62,Ee,3,1,"td",20),f(),b(63,22),d(64,Se,2,0,"th",19)(65,_e,3,1,"td",20),f(),b(66,23),d(67,ke,2,0,"th",19)(68,Ce,2,2,"td",20),f(),d(69,Te,1,0,"tr",24)(70,we,1,0,"tr",25),i(),t(71,"h3"),e(72,"Neurofeedback Control via HTTP"),i(),t(73,"p"),e(74," In a neurofeedback loop, you can trigger class-specific events by sending standard HTTP commands to the Cardputer. Each class is represented by a character (e.g., "),t(75,"code"),e(76,"R"),i(),e(77,", "),t(78,"code"),e(79,"L"),i(),e(80,", "),t(81,"code"),e(82,"U"),i(),e(83,", "),t(84,"code"),e(85,"D"),i(),e(86,", "),t(87,"code"),e(88,"S"),i(),e(89,"), and the system will emit a corresponding serial event such as "),t(90,"code"),e(91,"EVT=KEY\xA0L;"),i(),e(92,". "),i(),t(93,"p"),e(94," To simulate a key event without requiring physical input, send a request in the following format: "),i(),t(95,"pre")(96,"code"),e(97),t(98,"strong"),e(99,"X"),i(),e(100,";"),i()(),t(101,"p"),e(102," Here, "),t(103,"strong"),e(104,"X"),i(),e(105," is the character representing the intended class. This virtual key event will be processed identically to a real key press. "),i(),t(106,"p"),e(107," You can also chain multiple commands in a single request using semicolons: "),i(),t(108,"pre")(109,"code"),e(110),i()(),t(111,"p"),e(112," Upon processing, the Cardputer sends serial output messages like "),t(113,"code"),e(114,"EVT=KEY\xA0X;"),i(),e(115,", enabling real-time synchronization with inference engines or feedback systems. "),i(),t(116,"h2",16),e(117,"Runtime Configuration Events (EVT=SET)"),i(),t(118,"p"),e(119," Below is a list of supported runtime commands available through the "),t(120,"code"),e(121,"EVT=SET"),i(),e(122," mechanism. These commands allow the experiment to adapt dynamically to user input, classifier output, or external triggers. Each command includes a set of expected arguments and can be issued via HTTP or serial communication. "),i(),t(123,"table",17),b(124,21),d(125,Me,2,0,"th",19)(126,Ie,2,1,"td",20),f(),b(127,26),d(128,Be,2,0,"th",19)(129,De,3,1,"td",20),f(),b(130,27),d(131,Re,2,0,"th",19)(132,He,3,1,"td",20),f(),b(133,23),d(134,Ve,2,0,"th",19)(135,Ae,2,2,"td",20),f(),d(136,Le,1,0,"tr",24)(137,$e,1,0,"tr",25),i(),t(138,"p",28),e(139," These commands are processed in real time by the visualization engine and can be used to finely control stimulus behavior in response to decoding events, user interactions, or adaptive experimental logic. "),i(),t(140,"p"),B(141,qe,4,2,null,null,I),i()(),t(143,"mat-tab",29),c(144,"div",16)(145,"app-experiment",30),t(146,"button",31),E("click",function(){x(g);let u=H(6);return v(u.selectedIndex=1)}),t(147,"mat-icon"),e(148,"build"),i(),e(149," Configure this experiment "),i()()()()}m&2&&(l(3),V(r.experiment.name),l(),s("innerHTML",r.experiment.description,_),l(5),s("config",r.formField)("columns",r.columns)("storageKey",r.storageKey),l(2),s("innerHTML",r.summary(),_),l(5),s("href",A("",r.currentUrl,"",r.getFullWindowLink("/stimuli")),T),l(),S(" ",r.currentUrl,"",r.getFullWindowLink("/stimuli")," "),l(),s("cdkCopyToClipboard",r.currentUrl+r.getFullWindowLink("/stimuli")),l(5),s("experimentConfig",r.formData())("embeded","embeded")("stimulusCommandMap",r.stimulusCommandMap),l(33),s("dataSource",r.toDataSource(r.stimulusCommandMap)),l(13),s("matHeaderRowDef",r.displayedColumnsCommandMap),l(),s("matRowDefColumns",r.displayedColumnsCommandMap),l(27),p("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0"),l(13),p("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0L;CMD=BIP;"),l(13),s("dataSource",r.commandRegistry),l(13),s("matHeaderRowDef",r.displayedColumnsCommandRegistry),l(),s("matRowDefColumns",r.displayedColumnsCommandRegistry),l(4),D(r.commandRegistry),l(4),s("experiment",r.experiment))},dependencies:[$,Q,J,W,X,j,Y,Z,z,P,K,fe,ie,te,be,ae,oe,de,le,re,ce,me,se,pe,ue],encapsulation:2})};export{ge as MotorImageryBlocked};
