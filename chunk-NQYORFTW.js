import{h as R,l as j}from"./chunk-3P5ZL67M.js";import"./chunk-EMJZJBKN.js";import"./chunk-NR3FFGCX.js";import{a as k,b as G}from"./chunk-RRVB2HMI.js";import{b as A}from"./chunk-JBAJ54Q4.js";import{a as N,b as V}from"./chunk-YI3VNXDB.js";import{b as L,c as O}from"./chunk-FENM2PE7.js";import{l as H,o as B}from"./chunk-DTIROHQJ.js";import{l as T,m as E}from"./chunk-7SNDEHL7.js";import{$a as g,$b as i,Bb as P,Cb as h,Eb as a,Fb as o,Gb as m,Ib as v,Mb as x,Nb as l,Wa as r,Zb as y,ac as I,bc as C,d as S,hb as D,ka as p,la as u,pc as f,qc as w,va as M,xb as d,yb as s,zb as b}from"./chunk-7SNNTRZ7.js";function W(e,n){if(e&1){let t=v();a(0,"button",1),x("click",function(){p(t);let c=l(2);return u(c.hardwareService.autoConnect())}),i(1," Auto-Connect to Hardware "),a(2,"mat-icon"),i(3,"usb"),o()()}}function Y(e,n){if(e&1){let t=v();a(0,"div",0)(1,"button",1),x("click",function(){p(t);let c=l();return u(c.hardwareService.requestAndConnectDevice())}),i(2," Select Hardware to Connect "),a(3,"mat-icon"),i(4,"usb"),o()(),d(5,W,4,0,"button",2),o()}if(e&2){let t=l();r(5),s(t.hardwareService.hasAvailableDevice()?5:-1)}}function $(e,n){if(e&1&&(a(0,"b"),i(1),o(),i(2),m(3,"br")),e&2){let t=n.$implicit;r(),C("",t.name,":"),r(),C(" ",t.value)}}function q(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().latency*1e3,"1.0-2")," \xB5s ")}}function z(e,n){e&1&&i(0," ??? ")}function J(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().jitter*1e3,"1.0-2")," \xB5s ")}}function K(e,n){e&1&&i(0," ??? ")}function Q(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().min*1e3,"1.0-2")," \xB5s ")}}function X(e,n){e&1&&i(0," ??? ")}function Z(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().max,"1.0-2")," ms ")}}function ee(e,n){e&1&&i(0," ??? ")}function te(e,n){if(e&1&&(i(0),f(1,"number")),e&2){let t=l(2);C(" ",w(1,1,t.hardwareService.latencyStats().median*1e3,"1.0-2")," \xB5s ")}}function ie(e,n){e&1&&i(0," ??? ")}function ne(e,n){if(e&1&&i(0),e&2){let t=l(2);C(" ",t.hardwareService.latencyStats().samples," ")}}function ae(e,n){e&1&&i(0," ??? ")}function oe(e,n){if(e&1){let t=v();a(0,"div",3)(1,"button",4),x("click",function(){p(t);let c=l();return u(c.hardwareService.disconnect())}),i(2," Disconnect from Hardware "),a(3,"mat-icon"),i(4,"usb_off"),o()(),a(5,"button",1),x("click",function(){p(t);let c=l();return u(c.testConnection())}),i(6," Test Connection "),o()(),a(7,"div",5)(8,"p",6),i(9,"Connection successful!"),o(),a(10,"p",7),i(11,"Connection failed!"),o()(),m(12,"mat-divider"),a(13,"p",5),P(14,$,4,2,null,null,b),o(),m(16,"mat-divider"),a(17,"div",8)(18,"button",1),x("click",function(){p(t);let c=l();return u(c.hardwareService.measureLatency())}),i(19," Measure latency "),a(20,"mat-icon"),i(21,"acute"),o()(),a(22,"p")(23,"b"),i(24,"Latency:"),o(),d(25,q,2,4)(26,z,1,0),m(27,"br"),a(28,"b"),i(29,"Jitter:"),o(),d(30,J,2,4)(31,K,1,0),m(32,"br"),a(33,"b"),i(34,"Min:"),o(),d(35,Q,2,4)(36,X,1,0),m(37,"br"),a(38,"b"),i(39,"Max:"),o(),d(40,Z,2,4)(41,ee,1,0),m(42,"br"),a(43,"b"),i(44,"Median:"),o(),d(45,te,2,4)(46,ie,1,0),m(47,"br"),a(48,"b"),i(49,"Samples:"),o(),d(50,ne,1,1)(51,ae,1,0),o()()}if(e&2){let t=l();r(8),y("active",t.successConnectedMessage()),r(2),y("active",t.failConnectedMessage()),r(4),h(t.hardwareService.getProperties()),r(11),s(t.hardwareService.latencyStats().latency>0?25:26),r(5),s(t.hardwareService.latencyStats().jitter>0?30:31),r(5),s(t.hardwareService.latencyStats().min>0?35:36),r(5),s(t.hardwareService.latencyStats().max>0?40:41),r(5),s(t.hardwareService.latencyStats().median>0?45:46),r(5),s(t.hardwareService.latencyStats().samples>0?50:51)}}function re(e,n){if(e&1){let t=v();a(0,"button",11),x("click",function(){let c=p(t).$implicit,U=l(2);return u(U.onCommand(c))}),i(1),o()}if(e&2){let t=n.$implicit;r(),I(t)}}function le(e,n){if(e&1&&(m(0,"mat-divider"),a(1,"div",9),P(2,re,2,1,"button",10,b),o()),e&2){let t=l();r(2),h(t.testCommands)}}var F=class e{constructor(n,t,_){this.navigationService=n;this.breadcrumbService=t;this.hardwareService=_;n.setActiveLink("/hardware-control-panel"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Hardware Control Panel",url:"/hardware-control-panel"}])}successConnectedMessage=M(!1);failConnectedMessage=M(!1);devMode=window.location.hostname.startsWith("localhost");ngOnInit(){return S(this,null,function*(){yield this.hardwareService.checkAvailableDevice()})}testConnection(){return S(this,null,function*(){this.hardwareService.flushQueues(),yield this.hardwareService.writeLine("CMD=PING;CMD=@BIP 1000 100 128;CMD=@BRAND;");let n=yield this.hardwareService.readLine();this.successConnectedMessage.set(n==="RESP=PONG;"),this.failConnectedMessage.set(n!=="RESP=PONG;")})}onCommand(n){return S(this,null,function*(){yield this.hardwareService.writeLine(n)})}testCommands=["CMD=PING;","CMD=BIP 1000 100 128;","CMD=BRAND;","CMD=BIP;","CMD=BIP 3000;","CMD=BIP 1000 500;","CMD=BIP 2000 300 64;","CMD=BIP 2000 300 128;","CMD=BIP 2000 300 255;","CMD=CLA;",'CMD=LOG "testing log message";','CMD=LOG "testing log message" RED;','CMD=LOG "testing log message" BLUE;','CMD=LOG "testing log message" GREEN;','CMD=LOG "testing log message" CYAN;','CMD=LOG "testing log message" YELLOW;','CMD=LOG "testing log message" MAGENTA;','CMD=LOG "testing log message" ORANGE;','CMD=LOG "testing log message" PINK;','CMD=LOG "This is a long title that should wrap automatically across multiple lines if it doesnt fit.";','CMD=TITLE "This is a long title that should wrap automatically across multiple lines if it doesnt fit.";','CMD=TITLE "Unilateral Motor Imagery" BLUE;','CMD=TITLE "Unilateral Motor Imagery" RED 3;','CMD=TITLE "Motor Imagery" YELLOW 4;'];static \u0275fac=function(t){return new(t||e)(g(N),g(V),g(A))};static \u0275cmp=D({type:e,selectors:[["app-hardware-control-panel"]],decls:5,vars:2,consts:[[1,"flex-row","margin-bottom-large"],["matButton","filled",3,"click"],["matButton","filled"],[1,"flex-row"],["matButton","filled",1,"disconnect",3,"click"],[1,"margin-top-large"],[1,"success"],[1,"fail"],[1,"margin-bottom-large","margin-top-large"],[1,"button-row","margin-top-large"],["matButton","tonal",1,"command-button"],["matButton","tonal",1,"command-button",3,"click"]],template:function(t,_){t&1&&(a(0,"h1"),i(1,"Hardware Control Panel"),o(),d(2,Y,6,1,"div",0)(3,oe,52,10),d(4,le,4,0)),t&2&&(r(2),s(_.hardwareService.isConnected()?3:2),r(2),s(_.devMode?4:-1))},dependencies:[B,H,G,k,O,L,j,R,E,T],styles:[".disconnect[_ngcontent-%COMP%]{background-color:var(--mat-sys-error)!important}.success[_ngcontent-%COMP%]{display:none}.success.active[_ngcontent-%COMP%]{display:block;color:var(--mat-sys-primary)}.fail[_ngcontent-%COMP%]{display:none}.fail.active[_ngcontent-%COMP%]{display:block;color:var(--mat-sys-error)}.button-row[_ngcontent-%COMP%]{display:flex;flex-flow:wrap;gap:8px;justify-content:space-evenly}.command-button[_ngcontent-%COMP%]{font-family:monospace;font-size:.8rem}"]})};export{F as HardwareControlPanel};
