import{c as be,h as he,i as _e,j as ve,k as ye}from"./chunk-FNTTNCNS.js";import{b as L}from"./chunk-T26HEB2W.js";import{b as D}from"./chunk-H53LNFG5.js";import{a as E}from"./chunk-O3YAIXEY.js";import{b as ue,c as pe}from"./chunk-XRGWM46W.js";import{a as ge,b as fe}from"./chunk-EBVX5MXQ.js";import{a as oe,c as ae,d as se}from"./chunk-JW5YZPO3.js";import{i as me,k as de}from"./chunk-NRSOVIAX.js";import{Z as le,ca as ce}from"./chunk-4SNU4EVC.js";import{$ as j,Ab as k,Bb as o,Cb as a,Db as p,Dc as q,Hb as X,Lb as d,Mb as b,Nb as Z,Ob as $,Pa as G,Qb as Y,Rb as ee,Sa as l,Sb as te,Wa as W,Xa as c,Xb as y,Yb as w,Z as V,Zb as g,_b as s,ac as z,ba as h,db as P,eb as J,ec as re,fb as Q,fc as C,ga as B,ha as F,lb as O,mb as U,ra as T,tb as K,tc as ie,ub as _,vb as v,wa as H,zc as ne}from"./chunk-JNWBK6C6.js";import{k as A}from"./chunk-GV7GV3NK.js";function Te(i,r){i&1&&p(0,"div",2)}var ke=new j("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Se=(()=>{class i{_elementRef=h(H);_ngZone=h(U);_changeDetectorRef=h(ne);_renderer=h(W);_cleanupTransitionEnd;constructor(){let e=h(ke,{optional:!0});e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=le();get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=we(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=we(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new O;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(t){return new(t||i)};static \u0275cmp=P({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(t,n){t&2&&(K("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),g("mat-"+n.color),w("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",q],bufferValue:[2,"bufferValue","bufferValue",q],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(t,n){t&1&&(o(0,"div",0),p(1,"div",1),_(2,Te,1,0,"div",2),a(),o(3,"div",3),p(4,"span",4),a(),o(5,"div",5),p(6,"span",4),a()),t&2&&(l(),y("flex-basis",n._getBufferBarFlexBasis()),l(),v(n.mode==="buffer"?2:-1),l(),y("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return i})();function we(i,r=0,e=100){return Math.max(r,Math.min(e,i))}var Ue=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=J({type:i});static \u0275inj=V({imports:[ce]})}return i})();var Oe=["cueElement"];function nt(i,r={}){return function(e,t,n){e.constructor.hasOwnProperty("__commandMap")||Object.defineProperty(e.constructor,"__commandMap",{value:new Map,enumerable:!1,configurable:!1,writable:!1}),e.constructor.__commandMap.set(i,{methodName:t,description:r.description??"",example:r.example??"",arguments:r.arguments??[]})}}var Me=class i{constructor(r,e,t,n,R,N){this.route=r;this.themeService=e;this.router=t;this.hardwareService=n;this.dialog=R;this.supabaseService=N;this.setupCommands(),ie(()=>{if(this.stimuliMode()==="neurofeedback"){let S=this.hardwareService.core.evtKey();if(S){if(S===" ")this.showTrial(null);else{let u=Object.entries(this.stimulusCommandMap).find(([,m])=>m===S)?.[0];u&&this.showTrial(u)}this.hardwareService.core.evtKey.set("")}let M=this.hardwareService.core.evtConfig();if(M){let u=Array.from(M.trim().matchAll(/"([^"]+)"|'([^']+)'|[^\s]+/g)).map(f=>f[1]??f[2]??f[0]),m=u[0],x=u.slice(1);this.internalRegistry[m]&&this.internalRegistry[m].fn(...x),this.hardwareService.core.evtConfig.set("")}}})}experimentConfig;embeded="fullwindow";stimulusCommandMap;stimulusMarkersMap;commandRegistry=new O;cuesElement;onDelivery=T(!1);progressValue=T(0);countdownTimer=T("");stimuliMode=T("sequential");countdownTimeoutId=null;countdownIntervalId=null;cancelStimuliSequence=null;startCountdownValue=5;fullWindowLink="";internalRegistry={};hasAdaptive=!1;setupCommands(){let r=this.constructor.__commandMap||new Map;for(let[e,t]of r.entries()){let n=this[t.methodName];typeof n=="function"&&!this.internalRegistry[e]&&(this.internalRegistry[e]={fn:n.bind(this),description:t.description??"",example:t.example??"",arguments:t.arguments??""})}this.hasAdaptive=Object.keys(this.internalRegistry).length>0}ngOnInit(){this.loadConfigFromURL(),this.setWindow(),this.commandRegistry.emit(this.internalRegistry)}ngOnDestroy(){this.stopSequence()}ngAfterViewInit(){this.hardwareService.core.checkAvailableDevice()}setWindow(){if(this.embeded==="embeded")document.exitFullscreen&&document.exitFullscreen();else{let r=document.documentElement;r.requestFullscreen&&r.requestFullscreen()}}getRandomSoa(r){let e=r[0],t=r[1];return Math.floor(Math.random()*(t-e+1))+e}startCountdown(){this.supabaseService.getTierLevel(this.supabaseService.userTier())<this.supabaseService.getTierLevel("Pro")?this.dialog.open(he,{data:{title:"Hardware Integration Restricted",question:"Access to hardware configuration is only available to users with a Pro or Enterprise plan.",confirmText:"Got it"}}).afterClosed().subscribe(()=>{this.startCountdown_()}):this.startCountdown_()}startCountdown_(){this.onDelivery.set(!0),this.hardwareService.writeLine('CMD=CLA;CMD=@LOG "Session start" RED;'),this.countdownTimeoutId=window.setTimeout(()=>A(this,null,function*(){this.countdownTimer.set(this.startCountdownValue),yield this.hardwareService.writeLine("CMD=@BIP 1000 100 128;"),this.countdownIntervalId=window.setInterval(()=>A(this,null,function*(){let r=this.countdownTimer();r>1?(this.countdownTimer.set(r-1),yield this.hardwareService.writeLine("CMD=@BIP 1000 100 128;")):(this.countdownIntervalId!==null&&(clearInterval(this.countdownIntervalId),this.countdownIntervalId=null),this.countdownTimer.set(""),this.countdownTimeoutId=window.setTimeout(()=>{this.cancelStimuliSequence=this.runStimuliSequence()},1e3))}),1e3)}),1e3)}stopSequence(){this.hardwareService.writeLine('CMD=@LOG "Session End" RED;'),this.countdownTimeoutId!==null&&(clearTimeout(this.countdownTimeoutId),this.countdownTimeoutId=null),this.countdownIntervalId!==null&&(clearInterval(this.countdownIntervalId),this.countdownIntervalId=null),this.cancelStimuliSequence?.(),this.cancelStimuliSequence=null,this.countdownTimer.set(""),this.onDelivery.set(!1),this.stopStimuliSequence(),this.setProgress(0)}shuffle(r){let e=[...r];for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}setProgress(r){this.progressValue.set(r),r>=99&&setTimeout(()=>{this.hardwareService.writeLine('CMD=@LOG "Session End" RED;CMD=@BIP;')},3e3)}gotoFullWindow(){this.stopSequence();let r=btoa(JSON.stringify(this.experimentConfig)),e=btoa(JSON.stringify(this.stimulusCommandMap)),t=btoa(JSON.stringify(this.stimulusMarkersMap));this.router.navigate([this.fullWindowLink],{queryParams:{config:r,command:e,markers:t}})}loadConfigFromURL(){this.embeded!=="embeded"&&this.route.queryParams.subscribe(r=>{this.experimentConfig=JSON.parse(atob(r.config)),this.stimulusCommandMap=JSON.parse(atob(r.command)),this.stimulusMarkersMap=JSON.parse(atob(r.markers))})}selectstimuliMode(r){this.stimuliMode.set(r),this.generateTrials(),this.hardwareService.core.evtKey.set(""),this.hardwareService.core.evtConfig.set("")}fixClass(r){return r.replace(/ /g,"_")}propagateClassMarker(r){if(r===null)return;let e=this.stimulusMarkersMap[r];this.hardwareService.writeLine(`CMD=MKR DC=${e.dc_value} IO=${e.io_duration};`)}runStimuliSequence(){let r=this.generateTrials(),e=performance.now(),t=0,n=[],R=m=>{let x=e+r.slice(0,m).reduce((f,I)=>f+I.duration+I.soa,0);return Math.max(0,x-performance.now())},N=m=>{this.hardwareService.writeLine(`CMD=@LOG "Class: ${m.class}" GREEN;`),this.showTrial(m.class)},S=m=>{this.showTrial(null),t++,this.setProgress(100*t/r.length)},M=()=>{n.forEach(m=>window.clearTimeout(m)),n=[]},u=()=>{if(t>=r.length){M(),this.onDelivery.set(!1);return}let m=r[t],x=R(t),f=window.setTimeout(()=>{N(m);let I=window.setTimeout(()=>{S(m),u()},m.duration);n.push(I)},x);n.push(f)};return u(),M}static \u0275fac=function(e){return new(e||i)(c(oe),c(E),c(ae),c(L),c(be),c(D))};static \u0275dir=Q({type:i,viewQuery:function(e,t){if(e&1&&Y(Oe,5),e&2){let n;ee(n=te())&&(t.cuesElement=n)}},inputs:{experimentConfig:"experimentConfig",embeded:"embeded",stimulusCommandMap:"stimulusCommandMap",stimulusMarkersMap:"stimulusMarkersMap"},outputs:{commandRegistry:"commandRegistry"}})};var Ee=["*"];function De(i,r){i&1&&(o(0,"button",7)(1,"mat-icon"),s(2,"lock"),a(),s(3," Upgrade to Enable Hardware Features "),a())}function Le(i,r){if(i&1){let e=X();o(0,"button",16),d("click",function(){B(e);let n=b(3);return F(n.hardwareService.core.autoConnect())}),s(1),o(2,"mat-icon"),s(3,"usb_off"),a()()}if(i&2){let e=b(3);l(),z(" Auto-Connect to Hardware | ",e.hardwareService.connectionMode()," ")}}function Ae(i,r){if(i&1){let e=X();o(0,"button",16),d("click",function(){B(e);let n=b(3);return F(n.hardwareService.core.requestAndConnectDevice())}),s(1," Select Hardware to Connect "),o(2,"mat-icon"),s(3,"usb"),a()()}}function Be(i,r){if(i&1&&_(0,Le,4,1,"button",15)(1,Ae,4,0,"button",15),i&2){let e=b(2);v(e.hardwareService.core.hasAvailableDevice()?0:1)}}function Fe(i,r){if(i&1&&(o(0,"button",14),s(1),o(2,"mat-icon"),s(3,"usb"),a()()),i&2){let e=b(2);l(),z(" Connected | ",e.hardwareService.connectionMode()," ")}}function Xe(i,r){if(i&1&&_(0,Be,2,1)(1,Fe,4,1,"button",14),i&2){let e=b();v(e.hardwareService.core.isConnected()?1:0)}}var xe=class i{constructor(r,e,t){this.themeService=r;this.supabaseService=e;this.hardwareService=t}hostRef;static \u0275fac=function(e){return new(e||i)(c(E),c(D),c(L))};static \u0275cmp=P({type:i,selectors:[["app-stimuli-layout"]],inputs:{hostRef:"hostRef"},ngContentSelectors:Ee,decls:32,vars:33,consts:[["matIconButton","","matTooltip","\u26A0\uFE0F Stop stimulus delivery",1,"stop","conditional-visible-b","top-left",3,"click"],["matIconButton","","matTooltip","\u26A0\uFE0F Starting will begin stimulus delivery",1,"start","conditional-visible-b","top-left",3,"click"],["matIconButton","","matTooltip","\u26A0\uFE0F Fullscreen will restart stimulus delivery",3,"click"],["matIconButton","","matTooltip","\u26A0\uFE0F Exiting fullscreen will restart stimulus delivery",3,"routerLink"],["matIconButton","","id","mode-light",3,"click"],["matIconButton","","id","mode-dark",3,"click"],[1,"bottom-left","flex-row","flex-row-center"],["matButton","filled","routerLink","/user"],["name","stimuliMode",3,"change","value"],["value","sequential","matTooltip","Stimuli follow a predefined or randomized sequence."],["value","neurofeedback","matTooltip","Stimuli are shown only in response to external input signals."],[1,"center","counter",3,"innerHTML"],[1,"center","fixation"],["mode","determinate",3,"value"],["matButton","filled","disabled","",1,"connected"],["matButton","filled",1,"disconnected"],["matButton","filled",1,"disconnected",3,"click"]],template:function(e,t){e&1&&(Z(),o(0,"div")(1,"button",0),d("click",function(){return t.hostRef.stopSequence()}),o(2,"mat-icon"),s(3,"stop_circle"),a()(),o(4,"button",1),d("click",function(){return t.hostRef.startCountdown()}),o(5,"mat-icon"),s(6,"play_circle"),a()(),o(7,"button",2),d("click",function(){return t.hostRef.gotoFullWindow()}),o(8,"mat-icon"),s(9,"arrows_output"),a()(),o(10,"button",3)(11,"mat-icon"),s(12,"fullscreen_exit"),a()(),o(13,"button",4),d("click",function(){return t.themeService.setThemeMode("light")}),o(14,"mat-icon"),s(15,"light_mode"),a()(),o(16,"button",5),d("click",function(){return t.themeService.setThemeMode("dark")}),o(17,"mat-icon"),s(18,"dark_mode"),a()(),o(19,"div",6),_(20,De,4,0,"button",7)(21,Xe,2,1),o(22,"mat-button-toggle-group",8),d("change",function(R){return t.hostRef.selectstimuliMode(R.value)}),o(23,"mat-button-toggle",9),s(24," Scheduled "),a(),o(25,"mat-button-toggle",10),s(26," Signal-Based "),a()()(),p(27,"span",11),o(28,"mat-icon",12),s(29,"point_scan"),a(),$(30),p(31,"mat-progress-bar",13),a()),e&2&&(g(C("screen ",t.hostRef.embeded)),w("light",t.themeService.mode()==="light")("dark",t.themeService.mode()==="dark"),l(),w("visible-b",t.hostRef.onDelivery()),l(3),w("visible-b",!t.hostRef.onDelivery()),l(3),g(C("bottom-right fullscreen ",t.hostRef.embeded)),l(3),g(C("bottom-right appscreen ",t.hostRef.embeded)),k("routerLink",re(t.hostRef.normalWindowLink)),l(3),g(C("top-right mode-button ",t.hostRef.embeded)),y("display",t.themeService.mode()==="dark"?"flex":"none"),l(3),g(C("top-right mode-button ",t.hostRef.embeded)),y("display",t.themeService.mode()==="dark"?"none":"flex"),l(4),v(t.supabaseService.getTierLevel(t.supabaseService.userTier())<t.supabaseService.getTierLevel("Pro")?20:21),l(2),k("value",t.hostRef.stimuliMode()),l(5),k("innerHTML",t.hostRef.countdownTimer(),G),l(4),k("value",t.hostRef.progressValue()))},dependencies:[ye,_e,ve,pe,ue,me,Se,fe,ge,se,de],styles:[":root .light{--mat-button-toggle-text-color: #e3e2e6;--mat-button-toggle-background-color: transparent;--mat-button-toggle-selected-state-text-color: #dbe2f9;--mat-button-toggle-selected-state-background-color: #3f4759}  :root .dark{--mat-button-toggle-text-color: #1b1b1f;--mat-button-toggle-background-color: transparent;--mat-button-toggle-selected-state-text-color: #131b2c;--mat-button-toggle-selected-state-background-color: #dbe2f9}.start[_ngcontent-%COMP%], .stop[_ngcontent-%COMP%]{scale:2}.conditional-visible-b.visible-b[_ngcontent-%COMP%]{visibility:visible}.conditional-visible-b[_ngcontent-%COMP%]{visibility:hidden}.screen[_ngcontent-%COMP%]{background-color:var(--mat-sys-inverse-surface);overflow:hidden}.screen.embeded[_ngcontent-%COMP%]{position:relative;border-radius:var(--mat-sys-corner-large);width:100%;aspect-ratio:16/9;height:unset}.screen.fullwindow[_ngcontent-%COMP%]{display:flex;width:100vw;height:100vh;align-items:center;justify-content:center}  .center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.counter[_ngcontent-%COMP%]{color:var(--mat-sys-inverse-on-surface);font:var(--mat-sys-body-small);font-size:12vh}.fixation[_ngcontent-%COMP%]{color:var(--mat-sys-inverse-on-surface);z-index:9999}.bottom-right[_ngcontent-%COMP%]{color:var(--mat-sys-inverse-on-surface);position:absolute;right:16px;bottom:16px}.bottom-left[_ngcontent-%COMP%]{color:var(--mat-sys-inverse-on-surface);position:absolute;left:16px;bottom:16px}.top-left[_ngcontent-%COMP%]{color:var(--mat-sys-inverse-on-surface);position:absolute;left:16px;top:16px}.top-right[_ngcontent-%COMP%]{color:var(--mat-sys-inverse-on-surface);position:absolute;right:16px;top:16px}.bottom-right[_ngcontent-%COMP%], .bottom-left[_ngcontent-%COMP%], .top-left[_ngcontent-%COMP%], .top-right[_ngcontent-%COMP%]{z-index:999}button.top-left[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], button.bottom-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1em;height:1em}.stop[_ngcontent-%COMP%]{color:var(--mat-sys-error)}.fullscreen[_ngcontent-%COMP%]{display:none}.appscreen[_ngcontent-%COMP%], .fullscreen.embeded[_ngcontent-%COMP%]{display:block}.appscreen.embeded[_ngcontent-%COMP%]{display:none}.mode-button.embeded[_ngcontent-%COMP%]{display:none!important}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}button[_ngcontent-%COMP%]{z-index:1000}.disconnected[_ngcontent-%COMP%]{background-color:var(--mat-sys-error)!important;color:var(--mat-sys-on-error)!important}.connected[_ngcontent-%COMP%]{background-color:var(--mat-sys-inverse-primary)!important;color:var(--mat-sys-on-primary-container)!important}"]})};export{Ue as a,nt as b,Me as c,xe as d};
