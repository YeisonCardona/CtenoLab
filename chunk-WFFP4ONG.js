import{c as Y,h as J,i as h}from"./chunk-6HWZK4UW.js";import{a as Z}from"./chunk-PIPUTGKR.js";import{b as _}from"./chunk-BBO5GAFI.js";import{b as G,c as W}from"./chunk-P3ALKQJN.js";import{a as z,c as F,d as q}from"./chunk-3MCZF45O.js";import{l as j,o as U}from"./chunk-DTS6JUDK.js";import{Z as L,ca as N}from"./chunk-B2AUY64Q.js";import{$ as M,Ac as T,Bb as a,Cb as s,Db as f,Fb as C,Jb as x,Kb as p,Sa as l,Vb as S,Wa as A,Wb as X,Xa as o,Xb as O,Yb as m,Z as I,_b as H,ba as c,db as b,eb as E,fb as R,ga as w,ha as y,lb as B,mb as D,ra as g,tb as P,ub as d,vb as u,wa as k,xc as V}from"./chunk-TEXVEQLC.js";import{i as v}from"./chunk-5KHZBZE7.js";function re(r,t){r&1&&f(0,"div",2)}var te=new M("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var xe=(()=>{class r{_elementRef=c(k);_ngZone=c(D);_changeDetectorRef=c(V);_renderer=c(A);_cleanupTransitionEnd;constructor(){let e=c(te,{optional:!0});e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=L();get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=$(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=$(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new B;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||r)};static \u0275cmp=b({type:r,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,n){i&2&&(P("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),O("mat-"+n.color),X("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",T],bufferValue:[2,"bufferValue","bufferValue",T],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,n){i&1&&(a(0,"div",0),f(1,"div",1),d(2,re,1,0,"div",2),s(),a(3,"div",3),f(4,"span",4),s(),a(5,"div",5),f(6,"span",4),s()),i&2&&(l(),S("flex-basis",n._getBufferBarFlexBasis()),l(),u(n.mode==="buffer"?2:-1),l(),S("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return r})();function $(r,t=0,e=100){return Math.max(t,Math.min(e,r))}var Se=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=E({type:r});static \u0275inj=I({imports:[N]})}return r})();var Q=class r{constructor(t,e,i,n,de,ue){this.route=t;this.themeService=e;this.router=i;this.hardwareService=n;this.dialog=de;this.supabaseService=ue;this.currentMode=e.getCurrentMode()}currentMode="auto";experimentConfig;embeded;onDelivery=g(!1);progressValue=g(0);countdownTimer=g("");countdownTimeoutId=null;countdownIntervalId=null;cancelStimuliSequence=null;startCountdownValue=5;fullWindowLink="";ngOnInit(){this.loadConfigFromURL(),this.setWindow()}setWindow(){if(this.embeded)document.exitFullscreen&&document.exitFullscreen();else{let t=document.documentElement;t.requestFullscreen&&t.requestFullscreen()}}setReactiveMode(t){this.themeService.setThemeMode(t),this.currentMode=t}getRandomSoa(t){let e=t[0],i=t[1];return Math.floor(Math.random()*(i-e+1))+e}startCountdown(){this.supabaseService.getTierLevel(this.supabaseService.userTier())<this.supabaseService.getTierLevel("Pro")?this.dialog.open(J,{data:{title:"Hardware Integration Restricted",question:"Access to hardware configuration is only available to users with a Pro or Enterprise plan.",confirmText:"Got it"}}).afterClosed().subscribe(t=>{this.startCountdown_()}):this.startCountdown_()}startCountdown_(){this.onDelivery.set(!0),this.countdownTimeoutId=window.setTimeout(()=>v(this,null,function*(){this.countdownTimer.set(this.startCountdownValue),yield this.hardwareService.writeLine("CMD=@BIP 1000 100 128;"),this.countdownIntervalId=window.setInterval(()=>v(this,null,function*(){let t=this.countdownTimer();t>1?(this.countdownTimer.set(t-1),yield this.hardwareService.writeLine("CMD=@BIP 1000 100 128;")):(this.countdownIntervalId!==null&&(clearInterval(this.countdownIntervalId),this.countdownIntervalId=null),this.countdownTimer.set(""),this.countdownTimeoutId=window.setTimeout(()=>{this.cancelStimuliSequence=this.runStimuliSequence()},1e3))}),1e3)}),1e3)}stopSequence(){this.countdownTimeoutId!==null&&(clearTimeout(this.countdownTimeoutId),this.countdownTimeoutId=null),this.countdownIntervalId!==null&&(clearInterval(this.countdownIntervalId),this.countdownIntervalId=null),this.cancelStimuliSequence?.(),this.cancelStimuliSequence=null,this.countdownTimer.set(""),this.onDelivery.set(!1),this.stopStimuliSequence(),this.setProgress(0)}shuffle(t){let e=[...t];for(let i=e.length-1;i>0;i--){let n=Math.floor(Math.random()*(i+1));[e[i],e[n]]=[e[n],e[i]]}return e}setProgress(t){this.progressValue.set(t)}gotoFullWindow(){this.stopSequence();let t=this.experimentConfig,e=btoa(JSON.stringify(t));this.router.navigate([this.fullWindowLink],{queryParams:{config:e}})}loadConfigFromURL(){this.embeded!=="embeded"&&this.route.queryParams.subscribe(t=>{this.experimentConfig=JSON.parse(atob(t.config))})}static \u0275fac=function(e){return new(e||r)(o(z),o(Z),o(F),o(h),o(Y),o(_))};static \u0275dir=R({type:r,inputs:{experimentConfig:"experimentConfig",embeded:"embeded"}})};function ae(r,t){r&1&&(a(0,"button",0)(1,"mat-icon"),m(2,"lock"),s(),m(3," Upgrade to Enable Hardware Features "),s())}function oe(r,t){if(r&1){let e=C();a(0,"button",3),x("click",function(){w(e);let n=p(3);return y(n.hardwareService.core.autoConnect())}),m(1," Auto-Connect to Hardware "),a(2,"mat-icon"),m(3,"usb_off"),s()()}}function se(r,t){if(r&1){let e=C();a(0,"button",3),x("click",function(){w(e);let n=p(3);return y(n.hardwareService.core.requestAndConnectDevice())}),m(1," Select Hardware to Connect "),a(2,"mat-icon"),m(3,"usb"),s()()}}function me(r,t){if(r&1&&d(0,oe,4,0,"button",2)(1,se,4,0,"button",2),r&2){let e=p(2);u(e.hardwareService.core.hasAvailableDevice()?0:1)}}function ce(r,t){if(r&1&&(a(0,"button",1),m(1),a(2,"mat-icon"),m(3,"usb"),s()()),r&2){let e=p(2);l(),H(" Connected | ",e.hardwareService.connectionMode()," ")}}function le(r,t){if(r&1&&d(0,me,2,1)(1,ce,4,1,"button",1),r&2){let e=p();u(e.hardwareService.core.isConnected()?1:0)}}var ee=class r{constructor(t,e){this.supabaseService=t;this.hardwareService=e}static \u0275fac=function(e){return new(e||r)(o(_),o(h))};static \u0275cmp=b({type:r,selectors:[["app-hardware"]],decls:2,vars:1,consts:[["matButton","filled","routerLink","/user"],["matButton","filled","disabled","",1,"connected"],["matButton","filled",1,"disconnected"],["matButton","filled",1,"disconnected",3,"click"]],template:function(e,i){e&1&&d(0,ae,4,0,"button",0)(1,le,2,1),e&2&&u(i.supabaseService.getTierLevel(i.supabaseService.userTier())<i.supabaseService.getTierLevel("Pro")?0:1)},dependencies:[U,j,W,G,q],styles:[".disconnected[_ngcontent-%COMP%]{background-color:var(--mat-sys-error)!important;color:var(--mat-sys-on-error)!important}.connected[_ngcontent-%COMP%]{background-color:var(--mat-sys-inverse-primary)!important;color:var(--mat-sys-on-primary-container)!important}button[_ngcontent-%COMP%]{z-index:1000}"]})};export{xe as a,Se as b,Q as c,ee as d};
