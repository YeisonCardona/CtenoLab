import{a as be}from"./chunk-5JBFQNYG.js";import{a as Q,b as Z,c as ne}from"./chunk-PO2GA6UA.js";import{b as te,c as ie}from"./chunk-CLRYXWNA.js";import"./chunk-OWSNVMTI.js";import{g as ae,h as re,i as oe,j as me,k as le,l as se,m as de,n as ce,o as ue,p as pe,q as fe}from"./chunk-GEYP3GVJ.js";import"./chunk-V3KTDLLC.js";import"./chunk-MKG7IB6M.js";import"./chunk-WUD4HGYV.js";import"./chunk-C5MP6677.js";import{c as ee}from"./chunk-A2A35ACL.js";import"./chunk-HNOTP6PA.js";import"./chunk-6GID3F7O.js";import{a as U,b as X,f as J}from"./chunk-6LM54VFH.js";import"./chunk-ZOZSFTET.js";import"./chunk-UAQ7UU4Y.js";import{a as N,b as Y}from"./chunk-M5Y3KVA3.js";import"./chunk-A7PT7FEX.js";import{b as G}from"./chunk-GB5JM2T7.js";import"./chunk-XP57CNC4.js";import"./chunk-4ULVSNUU.js";import{b as O}from"./chunk-XSAIEII5.js";import"./chunk-3C6VJBNL.js";import{b as z}from"./chunk-62AV6QVL.js";import"./chunk-7J34S6W5.js";import"./chunk-KHEHVW2Y.js";import"./chunk-7Q5CT564.js";import"./chunk-75WOWH2T.js";import"./chunk-6Q6ZBUD2.js";import"./chunk-NXQCXCLR.js";import{a as $,c as B}from"./chunk-HFDRJSGA.js";import{j as K,l as P,m as j,o as q}from"./chunk-RPD344RW.js";import{m as L}from"./chunk-IAEIATSC.js";import{$b as V,Ab as s,Bb as t,Cb as i,Db as c,Eb as f,Fb as b,Hb as H,Lb as E,Mb as C,Pa as _,Qa as w,Sa as m,Wb as W,Xa as h,_b as e,ac as u,bc as S,db as M,ga as x,gc as A,ha as v,hb as I,jb as d,sc as F,wb as R,yb as k,zb as D}from"./chunk-P6GYV7WW.js";import"./chunk-HVQDNULJ.js";function ye(n,o){n&1&&(t(0,"th",32),e(1," Class "),i())}function xe(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit;m(),u(" ",a.class," ")}}function ve(n,o){n&1&&(t(0,"th",32),e(1," Key "),i())}function Ee(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;m(2),u("'",a.command,"'")}}function Se(n,o){n&1&&(t(0,"th",32),e(1," Command "),i())}function _e(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;m(2),u("EVT=KEY ",a.command,";")}}function Ce(n,o){n&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Te(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit,l=C();m(),S(" http://",l.hardwareService.hardwareIP(),"/?c=EVT=KEY ",a.command,"; ")}}function we(n,o){n&1&&c(0,"tr",34)}function Me(n,o){n&1&&c(0,"tr",35)}function Ie(n,o){n&1&&(t(0,"th",32),e(1," Command "),i())}function Re(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit;m(),u(" ",a.command," ")}}function ke(n,o){n&1&&(t(0,"th",32),e(1," Arguments "),i())}function De(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;m(2),u("[",a.arguments,"]")}}function He(n,o){n&1&&(t(0,"th",32),e(1," Example "),i())}function We(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;m(2),u("EVT=SET ",a.example)}}function Ve(n,o){n&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Ae(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit,l=C();m(),S(" http://",l.hardwareService.hardwareIP(),"/?c=EVT=SET ",a.example,"; ")}}function Fe(n,o){n&1&&c(0,"tr",34)}function Le(n,o){n&1&&c(0,"tr",35)}function $e(n,o){if(n&1&&(t(0,"b"),e(1),i(),e(2),c(3,"br")),n&2){let a=o.$implicit;m(),u("",a.command,": "),m(),u(" ",a.description)}}var ge=class n extends ne{constructor(a,l,r,g,y,p,T){super(a,l,r,g,y);this.navigationService=p;this.breadcrumbService=T;this.navigationService.setActiveLink("/experiments/motor-imagery/wordcued"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Experiments",url:"/experiments"},{label:"Motor Imagery",url:"/experiments/motor-imagery"},{label:"Word Cued Motor Imagery",url:"/experiments/motor-imagery/wordcued"}])}requieredTier="Basic";storageKey="wordcued-motor-imagery";resetValues(){this.formData.set({classes:["Right Hand","Left Hand"],trials_per_class:20,stimulus_duration:4e3,soa:[1e3,2e3]})}summary=F(()=>{let a=this.formData();if(!a||Object.keys(a).length===0)return"";let l=[],r=a.classes?.length*a.trials_per_class||0,g=(a.soa?.[0]+a.soa?.[1])/2,y=a.soa?.[1]-a.soa?.[0],p=Math.round((a.stimulus_duration+g)*r/6e4);r>200&&l.push("The total number of trials exceeds 200. This may lead to participant fatigue."),p>30&&l.push("Estimated experiment duration exceeds 30 minutes. Consider reducing trials or stimulus duration."),(a.soa?.[0]??1e3)<300&&l.push("The minimum SOA is below 500 ms. This may not provide sufficient recovery time between trials."),y<500&&l.push("SOA range is too narrow. Randomization may be imperceptible and timing may not vary meaningfully across trials."),(!a.classes?.length||a.classes?.length===1)&&l.push("At least two motor imagery classes are required for meaningful classification and comparison.");let T=l.length?`<p class="warning"><b>\u26A0\uFE0F Warnings:</b><br>${l.map(he=>`\u2022 ${he}`).join("<br>")}</p>`:"";return`
    <p class="summary-block">
      <b>Selected classes</b>: ${a.classes?.join(", ")||"\u2014"}<br>
      <b>Total trials</b>: ${r}
      (${a.trials_per_class} per class \xD7 ${a.classes?.length||0} classes)<br>
      <b>Stimulus duration</b>: ${a.stimulus_duration} ms<br>
      <b>SOA</b>: ${a.soa?.[0]}\u2013${a.soa?.[1]} ms<br>
      <b>Estimated duration</b>: ${p} min
    </p>
    ${T}
  `});experiment={name:"Word-Cued Motor Imagery",description:'This experiment presents <b>motor imagery instructions</b> as <b>textual cues</b> (e.g., "LEFT HAND", "RIGHT FOOT") instead of symbols or arrows. The use of <b>semantic stimuli</b> enables analysis of <b>language-mediated motor preparation</b> and may enhance task clarity and cognitive focus. It is particularly useful in evaluating how <b>explicit verbal labeling</b> of movement intention modulates neural activation.',metadata:{type:"Unilateral",paradigm:"Endogenous",stimulus_type:"Textual",recording_modality:"EEG",difficulty_level:"Easy",class_range:{min:2,max:6}},objective:"The objective is to examine the brain\u2019s response to <b>word-based task instructions</b> and evaluate whether <b>semantic interpretation</b> of motor imagery cues influences <b>sensorimotor activation patterns</b>. This variant also allows for the study of <b>language-motor interaction</b> in BCI contexts.",hypothesis:"<b>Word-cued motor imagery</b> is expected to activate <b>both sensorimotor and language-processing regions</b>, producing distinct neural signatures that may enhance or modulate typical <b>mu and beta desynchronization</b>. Semantic clarity could improve classification accuracy and user comprehension.",procedure:'Participants are seated in front of a <b>monitor</b> and fitted with <b>EEG acquisition hardware</b>. Each trial begins with a <b>fixation cross</b>, followed by a <b>textual cue</b> displaying the motor imagery class (e.g., "RIGHT HAND"). Participants are instructed to <b>kinesthetically imagine the movement</b> described by the word for <b>4 to 6 seconds</b>. Afterward, a <b>rest period</b> is introduced. Classes are presented in randomized or blocked order, depending on experimental needs.',requirements:"Requires a <b>modern web browser</b> capable of rendering <b>text stimuli</b> with precise timing. EEG acquisition systems must be <b>synchronized</b> with the stimulus onset via <b>WebUSB</b>, <b>serial</b>, or <b>network protocols</b>. Participants should be <b>fluent in the experiment\u2019s language</b> and familiar with the body parts referenced. Comfortable reading conditions and <b>clear fonts</b> are essential.",characteristics:"Classified as <b>endogenous</b>, this task relies on <b>voluntary motor imagination</b> triggered by <b>semantic cues</b>. It bridges <b>language and motor systems</b> in the brain and is suitable for evaluating <b>text-based user interfaces</b> in BCI research and applications."};stimulusCommandMap={"Right Hand":["R","r"],"Left Hand":["L","l"],"Right Foot":["H","h"],"Left Foot":["J","j"],Rest:["S","s"]};formField=[{type:"checkbox",key:"classes",label:"Motor Imagery Classes",value:["Right Hand","Left Hand"],options:["Right Hand","Left Hand","Right Foot","Left Foot","Rest"],hint:"Select the classes to include in the experiment."},{type:"slider",key:"trials_per_class",label:"Trials per Class",value:20,min:1,max:100,step:1,suffix:" trials",hint:"Number of repetitions per selected class."},{type:"slider",key:"stimulus_duration",label:"Stimulus Duration",value:4e3,min:100,max:1e4,step:100,suffix:" ms",hint:"Time each stimulus is shown."},{type:"range",key:"soa",label:"SOA (Stimulus Onset Asynchrony)",value:[1e3,2e3],min:0,max:5e3,step:100,suffix:" ms",hint:"Time between stimuli, randomized between min and max."}];static \u0275fac=function(l){return new(l||n)(h($),h(B),h(O),h(ee),h(G),h(N),h(Y))};static \u0275cmp=M({type:n,selectors:[["app-wordcued"]],features:[I],decls:150,vars:24,consts:[["taskPanel",""],["tabGroup",""],["formComponent",""],[1,"no-margin-bottom"],[1,"align-justify",3,"innerHTML"],["dynamicHeight","","mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","Stimuli Delivery"],[1,"margin-bottom-small"],[3,"valueChange","config","columns","storageKey"],[1,"margin-top-large",3,"innerHTML"],[1,"flex-row","flex-row-left"],[1,"elipsis-96",3,"href"],["matIconButton","",3,"cdkCopyToClipboard"],["matButton","filled",1,"margin-top-large","margin-bottom-large",3,"click"],[3,"commandRegistry","experimentConfig","embeded","stimulusCommandMap"],["label","Neurofeedback & Runtime Events"],[1,"margin-top-large"],["mat-table","",3,"dataSource"],["matColumnDef","class"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","command"],["matColumnDef","complete_command"],["matColumnDef","http_request"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","arguments"],["matColumnDef","example"],[1,""],["label","Experiment Context"],[3,"experiment"],["matFab","","extended","",1,"margin-top-large","button-configure","margin-bottom-medium","margin-left-small","mat-elevation-z1",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(l,r){if(l&1){let g=H();t(0,"div",null,0)(2,"h1",3),e(3),i(),c(4,"p",4),t(5,"mat-tab-group",5,1)(7,"mat-tab",6),c(8,"div",7),t(9,"app-inputs",8,2),E("valueChange",function(p){return x(g),v(r.onFormValueChange(p))}),i(),c(11,"div",9),t(12,"p",10)(13,"span")(14,"b"),e(15,"Direct experiment link:"),i()(),t(16,"a",11),e(17),i(),t(18,"button",12)(19,"mat-icon"),e(20,"content_copy"),i()()(),t(21,"button",13),E("click",function(){return x(g),v(r.loadDefaultValues())}),e(22,"Load Default Values"),i(),t(23,"app-stimuli",14),E("commandRegistry",function(p){return x(g),v(r.setCommandRegistry(p))}),i()(),t(24,"mat-tab",15)(25,"h2",16),e(26,"Class Events for Neurofeedback Loop (EVT=KEY)"),i(),t(27,"p"),e(28," The commands listed below represent the "),t(29,"b"),e(30,"standard control classes"),i(),e(31," required to properly close the loop in "),t(32,"b"),e(33,"neurofeedback paradigms"),i(),e(34," or "),t(35,"b"),e(36,"inference-driven visual feedback experiments"),i(),e(37,". It is the responsibility of the user to implement the real-time signal processing, perform the classification or inference, and send the corresponding command back to the visualization system. "),i(),t(38,"p"),e(39," Each class is associated with a specific key that must be sent using the event format: "),t(40,"b")(41,"code"),e(42,"EVT=KEY <char>;"),i()(),c(43,"br"),e(44," For example: "),t(45,"code"),e(46,"EVT=KEY R;"),i(),e(47," or "),t(48,"code"),e(49,"EVT=KEY d;"),i(),e(50,". "),i(),t(51,"p"),e(52," This standard interface ensures seamless communication with the stimulus engine, allowing any external system (e.g., EEG decoder, BCI classifier, or embedded inference device) to "),t(53,"b"),e(54,"deliver neurofeedback events"),i(),e(55," reliably and in real time. "),i(),t(56,"table",17),f(57,18),d(58,ye,2,0,"th",19)(59,xe,2,1,"td",20),b(),f(60,21),d(61,ve,2,0,"th",19)(62,Ee,3,1,"td",20),b(),f(63,22),d(64,Se,2,0,"th",19)(65,_e,3,1,"td",20),b(),f(66,23),d(67,Ce,2,0,"th",19)(68,Te,2,2,"td",20),b(),d(69,we,1,0,"tr",24)(70,Me,1,0,"tr",25),i(),t(71,"h3"),e(72,"Neurofeedback Control via HTTP"),i(),t(73,"p"),e(74," In a neurofeedback loop, you can trigger class-specific events by sending standard HTTP commands to the Cardputer. Each class is represented by a character (e.g., "),t(75,"code"),e(76,"R"),i(),e(77,", "),t(78,"code"),e(79,"L"),i(),e(80,", "),t(81,"code"),e(82,"U"),i(),e(83,", "),t(84,"code"),e(85,"D"),i(),e(86,", "),t(87,"code"),e(88,"S"),i(),e(89,"), and the system will emit a corresponding serial event such as "),t(90,"code"),e(91,"EVT=KEY\xA0L;"),i(),e(92,". "),i(),t(93,"p"),e(94," To simulate a key event without requiring physical input, send a request in the following format: "),i(),t(95,"pre")(96,"code"),e(97),t(98,"strong"),e(99,"X"),i(),e(100,";"),i()(),t(101,"p"),e(102," Here, "),t(103,"strong"),e(104,"X"),i(),e(105," is the character representing the intended class. This virtual key event will be processed identically to a real key press. "),i(),t(106,"p"),e(107," You can also chain multiple commands in a single request using semicolons: "),i(),t(108,"pre")(109,"code"),e(110),i()(),t(111,"p"),e(112," Upon processing, the Cardputer sends serial output messages like "),t(113,"code"),e(114,"EVT=KEY\xA0X;"),i(),e(115,", enabling real-time synchronization with inference engines or feedback systems. "),i(),t(116,"h2",16),e(117,"Runtime Configuration Events (EVT=SET)"),i(),t(118,"p"),e(119," Below is a list of supported runtime commands available through the "),t(120,"code"),e(121,"EVT=SET"),i(),e(122," mechanism. These commands allow the experiment to adapt dynamically to user input, classifier output, or external triggers. Each command includes a set of expected arguments and can be issued via HTTP or serial communication. "),i(),t(123,"table",17),f(124,21),d(125,Ie,2,0,"th",19)(126,Re,2,1,"td",20),b(),f(127,26),d(128,ke,2,0,"th",19)(129,De,3,1,"td",20),b(),f(130,27),d(131,He,2,0,"th",19)(132,We,3,1,"td",20),b(),f(133,23),d(134,Ve,2,0,"th",19)(135,Ae,2,2,"td",20),b(),d(136,Fe,1,0,"tr",24)(137,Le,1,0,"tr",25),i(),t(138,"p",28),e(139," These commands are processed in real time by the visualization engine and can be used to finely control stimulus behavior in response to decoding events, user interactions, or adaptive experimental logic. "),i(),t(140,"p"),k(141,$e,4,2,null,null,R),i()(),t(143,"mat-tab",29),c(144,"div",16)(145,"app-experiment",30),t(146,"button",31),E("click",function(){x(g);let p=W(6);return v(p.selectedIndex=1)}),t(147,"mat-icon"),e(148,"build"),i(),e(149," Configure this experiment "),i()()()()}l&2&&(m(3),V(r.experiment.name),m(),s("innerHTML",r.experiment.description,_),m(5),s("config",r.formField)("columns",r.columns)("storageKey",r.storageKey),m(2),s("innerHTML",r.summary(),_),m(5),s("href",A("",r.currentUrl,"",r.getFullWindowLink("/stimuli")),w),m(),S(" ",r.currentUrl,"",r.getFullWindowLink("/stimuli")," "),m(),s("cdkCopyToClipboard",r.currentUrl+r.getFullWindowLink("/stimuli")),m(5),s("experimentConfig",r.formData())("embeded","embeded")("stimulusCommandMap",r.stimulusCommandMap),m(33),s("dataSource",r.toDataSource(r.stimulusCommandMap)),m(13),s("matHeaderRowDef",r.displayedColumnsCommandMap),m(),s("matRowDefColumns",r.displayedColumnsCommandMap),m(27),u("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0"),m(13),u("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0L;CMD=BIP;"),m(13),s("dataSource",r.commandRegistry),m(13),s("matHeaderRowDef",r.displayedColumnsCommandRegistry),m(),s("matRowDefColumns",r.displayedColumnsCommandRegistry),m(4),D(r.commandRegistry),m(4),s("experiment",r.experiment))},dependencies:[L,Q,J,U,X,j,z,Z,q,P,K,be,ie,te,fe,ae,oe,de,me,re,ce,le,se,ue,pe],encapsulation:2})};export{ge as MotorImageryWordcued};
