import{a as J,b as Q,c as ie}from"./chunk-OH32FEUY.js";import{b as ee,c as te}from"./chunk-QB7OLLSZ.js";import"./chunk-SM5WZ42E.js";import{g as ae,h as ne,i as re,j as oe,k as le,l as me,m as se,n as de,o as ce,p as pe,q as ue}from"./chunk-H5WGIHLG.js";import"./chunk-PJNPSINV.js";import"./chunk-BBP7SRE3.js";import"./chunk-PPTOLQUC.js";import{a as be}from"./chunk-RS2GYSEI.js";import"./chunk-KOUZVRIH.js";import{c as Z}from"./chunk-F75DWSR5.js";import"./chunk-FIZVL3VI.js";import"./chunk-JXTH7T7D.js";import{a as U,b as W,f as X}from"./chunk-HUBB3RBY.js";import"./chunk-WNFD6FAI.js";import"./chunk-NZGDHJV2.js";import{a as P,b as G}from"./chunk-5BZ6FIDP.js";import"./chunk-DA5AWU2W.js";import{b as N}from"./chunk-KVO645ZW.js";import"./chunk-LYRYWH7B.js";import"./chunk-O4F2KMSI.js";import{b as O}from"./chunk-FMSA2PVT.js";import"./chunk-VEDDZ7KK.js";import{b as Y}from"./chunk-RMWCCIY2.js";import"./chunk-CZTA7AJK.js";import"./chunk-TYDYYD77.js";import"./chunk-JDOSHPMK.js";import"./chunk-XDCPJGNX.js";import"./chunk-Z2VBC4WU.js";import"./chunk-ZNKCRLLO.js";import"./chunk-YQMFFB7N.js";import{a as $,c as V}from"./chunk-G5CEFGBZ.js";import{j as K,l as j,m as z,o as q}from"./chunk-LGQQ7PIV.js";import{m as A}from"./chunk-PKIU2H5U.js";import{$b as R,Ab as s,Bb as t,Cb as i,Db as d,Eb as g,Fb as h,Hb as H,Lb as C,Mb as y,Pa as M,Qa as I,Sa as o,Wb as D,Xa as c,_b as e,ac as v,bc as T,db as B,ga as x,gc as L,ha as S,hb as k,jb as b,sc as F,ub as E,vb as _}from"./chunk-HXPFIK5A.js";import"./chunk-5KHZBZE7.js";function he(a,l){a&1&&(t(0,"th",30),e(1," Class "),i())}function ye(a,l){if(a&1&&(t(0,"td",31),e(1),i()),a&2){let n=l.$implicit;o(),v(" ",n.name," ")}}function ve(a,l){a&1&&(t(0,"th",30),e(1," Command "),i())}function xe(a,l){if(a&1&&(t(0,"td",31)(1,"pre"),e(2),i()()),a&2){let n=l.$implicit;o(2),v("'",n.value,"'")}}function Se(a,l){a&1&&(t(0,"th",30),e(1," Alternative Command "),i())}function Ee(a,l){if(a&1&&(t(0,"pre"),e(1),i()),a&2){let n=y().$implicit;o(),v("'",n.value2,"'")}}function _e(a,l){if(a&1&&(t(0,"td",31),E(1,Ee,2,1,"pre"),i()),a&2){let n=l.$implicit;o(),_(n.value2?1:-1)}}function Ce(a,l){a&1&&(t(0,"th",30),e(1," Command String "),i())}function Me(a,l){if(a&1&&(t(0,"pre"),e(1),i()),a&2){let n=y().$implicit;o(),v("CMD=KEY ",n.value2,";")}}function Te(a,l){if(a&1&&(t(0,"td",31),E(1,Me,2,1,"pre"),i()),a&2){let n=l.$implicit;o(),_(n.value2?1:-1)}}function we(a,l){a&1&&(t(0,"th",30),e(1," HTTP Command "),i())}function Ie(a,l){if(a&1&&(t(0,"pre"),e(1),i()),a&2){let n=y().$implicit,m=y();o(),T("http://",m.hardwareService.hardwareIP(),"/?c=CMD=KEY ",n.value2,";")}}function Be(a,l){if(a&1&&(t(0,"td",31),E(1,Ie,2,2,"pre"),i()),a&2){let n=l.$implicit;o(),_(n.value2?1:-1)}}function ke(a,l){a&1&&d(0,"tr",32)}function He(a,l){a&1&&d(0,"tr",33)}var fe=class a extends ie{constructor(n,m,r,p,f,u,w){super(n,m,r,p,f);this.navigationService=u;this.breadcrumbService=w;this.navigationService.setActiveLink("/experiments/motor-imagery/bilateral"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Experiments",url:"/experiments"},{label:"Motor Imagery",url:"/experiments/motor-imagery"},{label:"Bilateral Motor Imagery",url:"/experiments/motor-imagery/bilateral"}])}requieredTier="Hobbyist";storageKey="bilateral-motor-imagery";resetValues(){this.formData.set({classes:["Left Hand","Right Hand","Both Hands"],trials_per_class:20,stimulus_duration:4e3,soa:[1e3,2e3]})}summary=F(()=>{let n=this.formData();if(!n||Object.keys(n).length===0)return"";let m=[],r=n.classes?.length*n.trials_per_class||0,p=(n.soa?.[0]+n.soa?.[1])/2,f=n.soa?.[1]-n.soa?.[0],u=Math.round((n.stimulus_duration+p)*r/6e4);r>200&&m.push("The total number of trials exceeds 200. This may lead to participant fatigue."),u>30&&m.push("Estimated experiment duration exceeds 30 minutes. Consider reducing trials or stimulus duration."),(n.soa?.[0]??1e3)<300&&m.push("The minimum SOA is below 500 ms. This may not provide sufficient recovery time between trials."),f<500&&m.push("SOA range is too narrow. Randomization may be imperceptible and timing may not vary meaningfully across trials."),(!n.classes?.length||n.classes?.length===1)&&m.push("At least two motor imagery classes are required for meaningful classification and comparison.");let w=m.length?`<p class="warning"><b>\u26A0\uFE0F Warnings:</b><br>${m.map(ge=>`\u2022 ${ge}`).join("<br>")}</p>`:"";return`
    <p class="summary-block">
      <b>Selected classes</b>: ${n.classes?.join(", ")||"\u2014"}<br>
      <b>Total trials</b>: ${r}
      (${n.trials_per_class} per class \xD7 ${n.classes?.length||0} classes)<br>
      <b>Stimulus duration</b>: ${n.stimulus_duration} ms<br>
      <b>SOA</b>: ${n.soa?.[0]}\u2013${n.soa?.[1]} ms<br>
      <b>Estimated duration</b>: ${u} min
    </p>
    ${w}
  `});experiment={name:"Bilateral Motor Imagery",description:"This experiment investigates the <b>mental rehearsal of coordinated or alternating movements</b> involving <b>both limbs</b>, typically the left and right hands. By engaging <b>bilateral motor imagery</b>, it enables the analysis of <b>interhemispheric communication</b>, <b>motor coordination patterns</b>, and <b>distributed cortical activation</b>. It is valuable in exploring more complex motor representations within <b>BCI systems</b>.",metadata:{type:"Bilateral",paradigm:"Endogenous",stimulus_type:"Visual",recording_modality:"EEG",difficulty_level:"Advanced",class_range:{min:2,max:4}},objective:"The goal of this experiment is to assess the participant\u2019s ability to <b>simultaneously or sequentially imagine movements</b> of <b>both limbs</b>, thereby enabling the study of <b>distributed cortical activations</b> and <b>coordination-related EEG features</b>. This helps evaluate the feasibility of <b>multiclass BCI control</b> based on complex motor imagery patterns.",hypothesis:"<b>Bilateral motor imagery</b> is expected to induce <b>concurrent modulations</b> in the <b>mu and beta frequency bands</b> over <b>bilateral sensorimotor cortices</b>. These modulations reflect interhemispheric synchronization and coordination, providing a neural basis for <b>more complex intention decoding</b> in BCI systems.",procedure:"Participants are placed in a <b>controlled environment</b> and connected to <b>EEG acquisition hardware</b>. Each trial begins with a <b>fixation cross</b>, followed by a <b>visual cue</b> indicating the motor imagery task: <b>simultaneous bimanual movement</b> (e.g., both hands grasping) or <b>alternating motor tasks</b>. Participants are instructed to <b>imagine the action kinesthetically</b> without physical movement. Each trial consists of a <b>4 to 6 second imagery phase</b> and a <b>rest interval</b>. Multiple blocks are used to capture variability and ensure robust feature extraction.",requirements:"This experiment requires a <b>modern web browser</b> with high-precision visual rendering. EEG configurations must support <b>bilateral electrode coverage</b> and be compatible with <b>stimulus synchronization</b> through <b>WebUSB, serial, or network</b> protocols. Participants should have prior experience with <b>motor imagery tasks</b> and be instructed in <b>bimanual coordination</b> strategies. Quiet conditions and stable attention are critical. <b>Optional feedback mechanisms</b> may be integrated for training purposes.",characteristics:"Categorized as <b>endogenous</b>, this experiment depends on <b>internally generated motor imagery</b> involving <b>both limbs</b>. The <b>bilateral design</b> allows exploration of <b>interhemispheric EEG features</b> and provides a richer testing ground for <b>multiclass BCI decoding</b>."};stimulusCommandMap={"Left Hand":["L","l"],"Right Hand":["R","r"],"Both Hands":["B","b"],"Both Feet":["H","h"],"Left Hand + Right Foot":["F","f"],"Right Hand + Left Foot":["J","j"],Rest:["S","s"]};formField=[{type:"checkbox",key:"classes",label:"Motor Imagery Classes",value:["Left Hand","Right Hand","Both Hands"],options:["Left Hand","Right Hand","Both Hands","Both Feet","Left Hand + Right Foot","Right Hand + Left Foot","Rest"],hint:"Select the classes to include in the experiment."},{type:"slider",key:"trials_per_class",label:"Trials per Class",value:20,min:1,max:100,step:1,suffix:" trials",hint:"Number of repetitions per selected class."},{type:"slider",key:"stimulus_duration",label:"Stimulus Duration",value:4e3,min:100,max:1e4,step:100,suffix:" ms",hint:"Time each stimulus is shown."},{type:"range",key:"soa",label:"SOA (Stimulus Onset Asynchrony)",value:[1e3,2e3],min:0,max:5e3,step:100,suffix:" ms",hint:"Time between stimuli, randomized between min and max."}];static \u0275fac=function(m){return new(m||a)(c($),c(V),c(O),c(Z),c(N),c(P),c(G))};static \u0275cmp=B({type:a,selectors:[["app-bilateral"]],features:[k],decls:126,vars:19,consts:[["taskPanel",""],["tabGroup",""],["formComponent",""],[1,"no-margin-bottom"],[1,"align-justify",3,"innerHTML"],["dynamicHeight","","mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","Stimuli Delivery"],[1,"margin-bottom-small"],[3,"valueChange","config","columns","storageKey"],[1,"margin-top-large",3,"innerHTML"],[1,"flex-row","flex-row-left"],[1,"elipsis-96",3,"href"],["matIconButton","",3,"cdkCopyToClipboard"],["matButton","filled",1,"margin-top-large","margin-bottom-large",3,"click"],[3,"experimentConfig","embeded","stimulusCommandMap"],["label","Hardware Setup"],[1,"margin-top-large"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","value2"],["matColumnDef","value3"],["matColumnDef","value4"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["label","Experiment Context"],[3,"experiment"],["matFab","","extended","",1,"margin-top-large","button-configure","margin-bottom-medium","margin-left-small","mat-elevation-z1",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(m,r){if(m&1){let p=H();t(0,"div",null,0)(2,"h1",3),e(3),i(),d(4,"p",4),t(5,"mat-tab-group",5,1)(7,"mat-tab",6),d(8,"div",7),t(9,"app-inputs",8,2),C("valueChange",function(u){return x(p),S(r.onFormValueChange(u))}),i(),d(11,"div",9),t(12,"p",10)(13,"span")(14,"b"),e(15,"Direct experiment link:"),i()(),t(16,"a",11),e(17),i(),t(18,"button",12)(19,"mat-icon"),e(20,"content_copy"),i()()(),t(21,"button",13),C("click",function(){return x(p),S(r.loadDefaultValues())}),e(22,"Load Default Values"),i(),d(23,"app-stimuli",14),i(),t(24,"mat-tab",15)(25,"h2",16),e(26,"Class Events for Neurofeedback Loop (EVT=KEY)"),i(),t(27,"p"),e(28," The commands listed below represent the "),t(29,"b"),e(30,"standard control classes"),i(),e(31," required to properly close the loop in "),t(32,"b"),e(33,"neurofeedback paradigms"),i(),e(34," or "),t(35,"b"),e(36,"inference-driven visual feedback experiments"),i(),e(37,". It is the responsibility of the user to implement the real-time signal processing, perform the classification or inference, and send the corresponding command back to the visualization system. "),i(),t(38,"p"),e(39," Each class is associated with a specific key that must be sent using the event format: "),t(40,"b")(41,"code"),e(42,"EVT=KEY <char>;"),i()(),d(43,"br"),e(44," For example: "),t(45,"code"),e(46,"EVT=KEY R;"),i(),e(47," or "),t(48,"code"),e(49,"EVT=KEY d;"),i(),e(50,". "),i(),t(51,"p"),e(52," This standard interface ensures seamless communication with the stimulus engine, allowing any external system (e.g., EEG decoder, BCI classifier, or embedded inference device) to "),t(53,"b"),e(54,"deliver neurofeedback events"),i(),e(55," reliably and in real time. "),i(),t(56,"table",17),g(57,18),b(58,he,2,0,"th",19)(59,ye,2,1,"td",20),h(),g(60,21),b(61,ve,2,0,"th",19)(62,xe,3,1,"td",20),h(),g(63,22),b(64,Se,2,0,"th",19)(65,_e,2,1,"td",20),h(),g(66,23),b(67,Ce,2,0,"th",19)(68,Te,2,1,"td",20),h(),g(69,24),b(70,we,2,0,"th",19)(71,Be,2,1,"td",20),h(),b(72,ke,1,0,"tr",25)(73,He,1,0,"tr",26),i(),t(74,"h3"),e(75,"Neurofeedback Control via HTTP"),i(),t(76,"p"),e(77," In a neurofeedback loop, you can trigger class-specific events by sending standard HTTP commands to the Cardputer. Each class is represented by a character (e.g., "),t(78,"code"),e(79,"R"),i(),e(80,", "),t(81,"code"),e(82,"L"),i(),e(83,", "),t(84,"code"),e(85,"U"),i(),e(86,", "),t(87,"code"),e(88,"D"),i(),e(89,", "),t(90,"code"),e(91,"S"),i(),e(92,"), and the system will emit a corresponding serial event such as "),t(93,"code"),e(94,"EVT=KEY\xA0L;"),i(),e(95,". "),i(),t(96,"p"),e(97," To simulate a key event without requiring physical input, send a request in the following format: "),i(),t(98,"pre")(99,"code"),e(100,"http://192.168.1.12/?c=CMD=KEY\xA0"),t(101,"strong"),e(102,"X"),i(),e(103,";"),i()(),t(104,"p"),e(105," Here, "),t(106,"strong"),e(107,"X"),i(),e(108," is the character representing the intended class. This virtual key event will be processed identically to a real key press. "),i(),t(109,"p"),e(110," You can also chain multiple commands in a single request using semicolons: "),i(),t(111,"pre")(112,"code"),e(113,"http://192.168.1.12/?c=CMD=KEY\xA0L;CMD=BIP;"),i()(),t(114,"p"),e(115," Upon processing, the Cardputer sends serial output messages like "),t(116,"code"),e(117,"EVT=KEY\xA0X;"),i(),e(118,", enabling real-time synchronization with inference engines or feedback systems. "),i()(),t(119,"mat-tab",27),d(120,"div",16)(121,"app-experiment",28),t(122,"button",29),C("click",function(){x(p);let u=D(6);return S(u.selectedIndex=1)}),t(123,"mat-icon"),e(124,"build"),i(),e(125," Configure this experiment "),i()()()()}m&2&&(o(3),R(r.experiment.name),o(),s("innerHTML",r.experiment.description,M),o(5),s("config",r.formField)("columns",r.columns)("storageKey",r.storageKey),o(2),s("innerHTML",r.summary(),M),o(5),s("href",L("",r.currentUrl,"",r.getFullWindowLink("/stimuli")),I),o(),T(" ",r.currentUrl,"",r.getFullWindowLink("/stimuli")," "),o(),s("cdkCopyToClipboard",r.currentUrl+r.getFullWindowLink("/stimuli")),o(5),s("experimentConfig",r.formData())("embeded","embeded")("stimulusCommandMap",r.stimulusCommandMap),o(33),s("dataSource",r.toDataSource(r.stimulusCommandMap)),o(16),s("matHeaderRowDef",r.displayedColumns),o(),s("matRowDefColumns",r.displayedColumns),o(48),s("experiment",r.experiment))},dependencies:[A,J,X,U,W,z,Y,Q,q,j,K,be,te,ee,ue,ae,re,se,oe,ne,de,le,me,ce,pe],encapsulation:2})};export{fe as MotorImageryBilateral};
