import{a as fe}from"./chunk-FFATWQ54.js";import{a as Q,b as Z,c as ne}from"./chunk-PO2GA6UA.js";import{b as te,c as ie}from"./chunk-CLRYXWNA.js";import"./chunk-OWSNVMTI.js";import{g as ae,h as re,i as oe,j as le,k as me,l as se,m as de,n as ce,o as ue,p as pe,q as be}from"./chunk-GEYP3GVJ.js";import"./chunk-V3KTDLLC.js";import"./chunk-MKG7IB6M.js";import"./chunk-WUD4HGYV.js";import"./chunk-C5MP6677.js";import{c as ee}from"./chunk-A2A35ACL.js";import"./chunk-HNOTP6PA.js";import"./chunk-6GID3F7O.js";import{a as U,b as X,f as J}from"./chunk-6LM54VFH.js";import"./chunk-ZOZSFTET.js";import"./chunk-UAQ7UU4Y.js";import{a as O,b as W}from"./chunk-M5Y3KVA3.js";import"./chunk-A7PT7FEX.js";import{b as N}from"./chunk-GB5JM2T7.js";import"./chunk-XP57CNC4.js";import"./chunk-4ULVSNUU.js";import{b as Y}from"./chunk-XSAIEII5.js";import"./chunk-3C6VJBNL.js";import{b as z}from"./chunk-62AV6QVL.js";import"./chunk-7J34S6W5.js";import"./chunk-KHEHVW2Y.js";import"./chunk-7Q5CT564.js";import"./chunk-75WOWH2T.js";import"./chunk-6Q6ZBUD2.js";import"./chunk-NXQCXCLR.js";import{a as B,c as L}from"./chunk-HFDRJSGA.js";import{j as K,l as $,m as G,o as j}from"./chunk-RPD344RW.js";import{m as V}from"./chunk-IAEIATSC.js";import{$b as F,Ab as s,Bb as t,Cb as i,Db as c,Eb as b,Fb as f,Hb as D,Lb as E,Mb as w,Pa as _,Qa as T,Sa as l,Wb as P,Xa as h,_b as e,ac as u,bc as v,db as M,ga as y,gc as A,ha as S,hb as I,jb as d,sc as H,wb as q,yb as R,zb as k}from"./chunk-P6GYV7WW.js";import"./chunk-HVQDNULJ.js";function xe(n,o){n&1&&(t(0,"th",32),e(1," Class "),i())}function ye(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit;l(),u(" ",a.class," ")}}function Se(n,o){n&1&&(t(0,"th",32),e(1," Key "),i())}function Ee(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),u("'",a.command,"'")}}function ve(n,o){n&1&&(t(0,"th",32),e(1," Command "),i())}function _e(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),u("EVT=KEY ",a.command,";")}}function we(n,o){n&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Ce(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit,m=w();l(),v(" http://",m.hardwareService.hardwareIP(),"/?c=EVT=KEY ",a.command,"; ")}}function Te(n,o){n&1&&c(0,"tr",34)}function Me(n,o){n&1&&c(0,"tr",35)}function Ie(n,o){n&1&&(t(0,"th",32),e(1," Command "),i())}function qe(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit;l(),u(" ",a.command," ")}}function Re(n,o){n&1&&(t(0,"th",32),e(1," Arguments "),i())}function ke(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),u("[",a.arguments,"]")}}function De(n,o){n&1&&(t(0,"th",32),e(1," Example "),i())}function Pe(n,o){if(n&1&&(t(0,"td",33)(1,"code"),e(2),i()()),n&2){let a=o.$implicit;l(2),u("EVT=SET ",a.example)}}function Fe(n,o){n&1&&(t(0,"th",32),e(1," HTTP Request "),i())}function Ae(n,o){if(n&1&&(t(0,"td",33),e(1),i()),n&2){let a=o.$implicit,m=w();l(),v(" http://",m.hardwareService.hardwareIP(),"/?c=EVT=SET ",a.example,"; ")}}function He(n,o){n&1&&c(0,"tr",34)}function Ve(n,o){n&1&&c(0,"tr",35)}function Be(n,o){if(n&1&&(t(0,"b"),e(1),i(),e(2),c(3,"br")),n&2){let a=o.$implicit;l(),u("",a.command,": "),l(),u(" ",a.description)}}var ge=class n extends ne{constructor(a,m,r,g,x,p,C){super(a,m,r,g,x);this.navigationService=p;this.breadcrumbService=C;this.navigationService.setActiveLink("/experiments/motor-imagery/sequential"),this.breadcrumbService.setBreadcrumbs([{label:"Home",url:"/home"},{label:"Experiments",url:"/experiments"},{label:"Motor Imagery",url:"/experiments/motor-imagery"},{label:"Sequential Motor Imagery",url:"/experiments/motor-imagery/sequential"}])}requieredTier="Hobbyist";storageKey="sequential-motor-imagery";resetValues(){this.formData.set({classes:["Grasp -> Rotate","Push -> Pull"],trials_per_class:20,stimulus_duration:4e3,intentional_duration:2e3,soa:[1e3,2e3]})}summary=H(()=>{let a=this.formData();if(!a||Object.keys(a).length===0)return"";let m=[],r=a.classes?.length*a.trials_per_class||0,g=(a.soa?.[0]+a.soa?.[1])/2,x=a.soa?.[1]-a.soa?.[0],p=Math.round((a.stimulus_duration+a.stimulus_duration+g)*r/6e4);r>200&&m.push("The total number of trials exceeds 200. This may lead to participant fatigue."),p>30&&m.push("Estimated experiment duration exceeds 30 minutes. Consider reducing trials or stimulus duration."),(a.soa?.[0]??1e3)<300&&m.push("The minimum SOA is below 500 ms. This may not provide sufficient recovery time between trials."),x<500&&m.push("SOA range is too narrow. Randomization may be imperceptible and timing may not vary meaningfully across trials."),(!a.classes?.length||a.classes?.length===1)&&m.push("At least two motor imagery classes are required for meaningful classification and comparison.");let C=m.length?`<p class="warning"><b>\u26A0\uFE0F Warnings:</b><br>${m.map(he=>`\u2022 ${he}`).join("<br>")}</p>`:"";return`
    <p class="summary-block">
      <b>Selected classes</b>: ${a.classes?.join(", ")||"\u2014"}<br>
      <b>Total trials</b>: ${r}
      (${a.trials_per_class} per class \xD7 ${a.classes?.length||0} classes)<br>
      <b>Stimulus duration</b>: ${a.stimulus_duration} ms<br>
      <b>SOA</b>: ${a.soa?.[0]}\u2013${a.soa?.[1]} ms<br>
      <b>Estimated duration</b>: ${p} min
    </p>
    ${C}
  `});experiment={name:"Sequential Motor Imagery",description:"This experiment involves the <b>imagination of ordered motor sequences</b>, such as <b>grasping followed by rotating</b> or <b>extending followed by retracting</b>. Each trial presents a <b>temporally structured cue sequence</b>, allowing researchers to study <b>multi-phase motor planning</b> and the temporal dynamics of motor imagery. It supports <b>complex classification strategies</b> based on the segmentation of motor intentions over time.",metadata:{type:"Sequential",paradigm:"Endogenous",stimulus_type:"Visual",recording_modality:"EEG",difficulty_level:"Advanced",class_range:{min:2,max:6}},objective:"The objective of this experiment is to evaluate the ability of participants to <b>internally generate temporally structured motor imagery sequences</b>. By presenting <b>two or more sequential cues</b> in each trial, it is possible to <b>analyze EEG responses</b> associated with <b>each phase of the motor plan</b> and assess the feasibility of decoding <b>multi-step motor intentions</b>.",hypothesis:"Sequential motor imagery is expected to induce <b>phase-specific modulations</b> in the <b>mu and beta bands</b>, revealing <b>temporal segmentation</b> in cortical activity. These dynamics may provide a basis for <b>high-resolution decoding</b> of compound motor plans in BCI systems.",procedure:'Participants are equipped with <b>EEG acquisition hardware</b> and seated in a <b>quiet environment</b>. Each trial begins with a <b>fixation cross</b>, followed by a <b>series of visual cues</b> (e.g., "Grasp -> Rotate") presented in succession, each lasting <b>2\u20134 seconds</b>. Participants are instructed to <b>imagine each action in the sequence</b> without physical movement. Trials include a <b>rest phase</b> between sequences. Multiple blocks ensure robustness across different class combinations.',requirements:"Requires a <b>modern web browser</b> with <b>timing-accurate visual rendering</b> and EEG hardware capable of <b>multi-event synchronization</b>. WebUSB, serial, or socket-based triggers are supported. Participants should be <b>trained in kinesthetic motor imagery</b> and instructed on <b>temporal separation of imagined actions</b>. Experimental supervision is recommended.",characteristics:"This experiment is categorized as <b>endogenous</b> and <b>sequential</b>, involving <b>internal motor imagery of multiple actions in temporal order</b>. It enables the study of <b>cortical dynamics across time segments</b>, useful for decoding <b>multi-phase intentions</b> and training BCI systems with <b>complex command structures</b>."};stimulusCommandMap={Grasp:["G","g"],Rotate:["T","t"],Push:["P","p"],Pull:["U","u"],"Open Hand":["O","o"],"Close Fist":["C","c"],"Flex Elbow":["F","f"],"Extend Elbow":["E","e"],"Raise Arm":["R","r"],"Lower Arm":["D","d"],Supinate:["S","s"],Pronate:["N","n"],"Step Forward":["W","w"],"Step Backward":["B","b"],"Toe Raise":["Q","q"],"Toe Press":["Z","z"],"Wrist Flexion":["X","x"],"Wrist Extension":["V","v"],"Ankle Dorsiflexion":["A","a"],Plantarflexion:["L","l"],Pinch:["I","i"],Release:["Y","y"],"Point Forward":["M","m"],Retract:["K","k"],"Reach Forward":["H","h"],"Pull Back":["J","j"],"Lift Arm":["1"],"Drop Arm":["2"],"Knee Extension":["3"],"Knee Flexion":["4"],Rest:["0"],"Grasp -> Rotate":[],"Push -> Pull":[],"Open Hand -> Close Fist":[],"Flex Elbow -> Extend Elbow":[],"Raise Arm -> Lower Arm":[],"Supinate -> Pronate":[],"Step Forward -> Step Backward":[],"Toe Raise -> Toe Press":[],"Wrist Flexion -> Wrist Extension":[],"Ankle Dorsiflexion -> Plantarflexion":[],"Pinch -> Release":[],"Point Forward -> Retract":[],"Reach Forward -> Pull Back":[],"Lift Arm -> Drop Arm":[],"Knee Extension -> Flexion":[]};formField=[{type:"checkbox",key:"classes",label:"Motor Imagery Classes",value:["Grasp -> Rotate","Push -> Pull"],options:["Grasp -> Rotate","Push -> Pull","Open Hand -> Close Fist","Flex Elbow -> Extend Elbow","Raise Arm -> Lower Arm","Supinate -> Pronate","Step Forward -> Step Backward","Toe Raise -> Toe Press","Wrist Flexion -> Wrist Extension","Ankle Dorsiflexion -> Plantarflexion","Pinch -> Release","Point Forward -> Retract","Reach Forward -> Pull Back","Lift Arm -> Drop Arm","Knee Extension -> Flexion","Rest"],hint:"Select the classes to include in the experiment."},{type:"slider",key:"trials_per_class",label:"Trials per Class",value:20,min:1,max:100,step:1,suffix:" trials",hint:"Number of repetitions per selected class."},{type:"slider",key:"stimulus_duration",label:"Instruction Duration",value:3e3,min:500,max:1e4,step:100,suffix:" ms",hint:"Time each individual instruction is displayed during the motor imagery sequence."},{type:"range",key:"soa",label:"SOA (Stimulus Onset Asynchrony)",value:[1e3,2e3],min:0,max:5e3,step:100,suffix:" ms",hint:"Time between stimuli, randomized between min and max."}];static \u0275fac=function(m){return new(m||n)(h(B),h(L),h(Y),h(ee),h(N),h(O),h(W))};static \u0275cmp=M({type:n,selectors:[["app-intentional"]],features:[I],decls:150,vars:24,consts:[["taskPanel",""],["tabGroup",""],["formComponent",""],[1,"no-margin-bottom"],[1,"align-justify",3,"innerHTML"],["dynamicHeight","","mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","Stimuli Delivery"],[1,"margin-bottom-small"],[3,"valueChange","config","columns","storageKey"],[1,"margin-top-large",3,"innerHTML"],[1,"flex-row","flex-row-left"],[1,"elipsis-96",3,"href"],["matIconButton","",3,"cdkCopyToClipboard"],["matButton","filled",1,"margin-top-large","margin-bottom-large",3,"click"],[3,"commandRegistry","experimentConfig","embeded","stimulusCommandMap"],["label","Neurofeedback & Runtime Events"],[1,"margin-top-large"],["mat-table","",3,"dataSource"],["matColumnDef","class"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","command"],["matColumnDef","complete_command"],["matColumnDef","http_request"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","arguments"],["matColumnDef","example"],[1,""],["label","Experiment Context"],[3,"experiment"],["matFab","","extended","",1,"margin-top-large","button-configure","margin-bottom-medium","margin-left-small","mat-elevation-z1",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(m,r){if(m&1){let g=D();t(0,"div",null,0)(2,"h1",3),e(3),i(),c(4,"p",4),t(5,"mat-tab-group",5,1)(7,"mat-tab",6),c(8,"div",7),t(9,"app-inputs",8,2),E("valueChange",function(p){return y(g),S(r.onFormValueChange(p))}),i(),c(11,"div",9),t(12,"p",10)(13,"span")(14,"b"),e(15,"Direct experiment link:"),i()(),t(16,"a",11),e(17),i(),t(18,"button",12)(19,"mat-icon"),e(20,"content_copy"),i()()(),t(21,"button",13),E("click",function(){return y(g),S(r.loadDefaultValues())}),e(22,"Load Default Values"),i(),t(23,"app-stimuli",14),E("commandRegistry",function(p){return y(g),S(r.setCommandRegistry(p))}),i()(),t(24,"mat-tab",15)(25,"h2",16),e(26,"Class Events for Neurofeedback Loop (EVT=KEY)"),i(),t(27,"p"),e(28," The commands listed below represent the "),t(29,"b"),e(30,"standard control classes"),i(),e(31," required to properly close the loop in "),t(32,"b"),e(33,"neurofeedback paradigms"),i(),e(34," or "),t(35,"b"),e(36,"inference-driven visual feedback experiments"),i(),e(37,". It is the responsibility of the user to implement the real-time signal processing, perform the classification or inference, and send the corresponding command back to the visualization system. "),i(),t(38,"p"),e(39," Each class is associated with a specific key that must be sent using the event format: "),t(40,"b")(41,"code"),e(42,"EVT=KEY <char>;"),i()(),c(43,"br"),e(44," For example: "),t(45,"code"),e(46,"EVT=KEY R;"),i(),e(47," or "),t(48,"code"),e(49,"EVT=KEY d;"),i(),e(50,". "),i(),t(51,"p"),e(52," This standard interface ensures seamless communication with the stimulus engine, allowing any external system (e.g., EEG decoder, BCI classifier, or embedded inference device) to "),t(53,"b"),e(54,"deliver neurofeedback events"),i(),e(55," reliably and in real time. "),i(),t(56,"table",17),b(57,18),d(58,xe,2,0,"th",19)(59,ye,2,1,"td",20),f(),b(60,21),d(61,Se,2,0,"th",19)(62,Ee,3,1,"td",20),f(),b(63,22),d(64,ve,2,0,"th",19)(65,_e,3,1,"td",20),f(),b(66,23),d(67,we,2,0,"th",19)(68,Ce,2,2,"td",20),f(),d(69,Te,1,0,"tr",24)(70,Me,1,0,"tr",25),i(),t(71,"h3"),e(72,"Neurofeedback Control via HTTP"),i(),t(73,"p"),e(74," In a neurofeedback loop, you can trigger class-specific events by sending standard HTTP commands to the Cardputer. Each class is represented by a character (e.g., "),t(75,"code"),e(76,"R"),i(),e(77,", "),t(78,"code"),e(79,"L"),i(),e(80,", "),t(81,"code"),e(82,"U"),i(),e(83,", "),t(84,"code"),e(85,"D"),i(),e(86,", "),t(87,"code"),e(88,"S"),i(),e(89,"), and the system will emit a corresponding serial event such as "),t(90,"code"),e(91,"EVT=KEY\xA0L;"),i(),e(92,". "),i(),t(93,"p"),e(94," To simulate a key event without requiring physical input, send a request in the following format: "),i(),t(95,"pre")(96,"code"),e(97),t(98,"strong"),e(99,"X"),i(),e(100,";"),i()(),t(101,"p"),e(102," Here, "),t(103,"strong"),e(104,"X"),i(),e(105," is the character representing the intended class. This virtual key event will be processed identically to a real key press. "),i(),t(106,"p"),e(107," You can also chain multiple commands in a single request using semicolons: "),i(),t(108,"pre")(109,"code"),e(110),i()(),t(111,"p"),e(112," Upon processing, the Cardputer sends serial output messages like "),t(113,"code"),e(114,"EVT=KEY\xA0X;"),i(),e(115,", enabling real-time synchronization with inference engines or feedback systems. "),i(),t(116,"h2",16),e(117,"Runtime Configuration Events (EVT=SET)"),i(),t(118,"p"),e(119," Below is a list of supported runtime commands available through the "),t(120,"code"),e(121,"EVT=SET"),i(),e(122," mechanism. These commands allow the experiment to adapt dynamically to user input, classifier output, or external triggers. Each command includes a set of expected arguments and can be issued via HTTP or serial communication. "),i(),t(123,"table",17),b(124,21),d(125,Ie,2,0,"th",19)(126,qe,2,1,"td",20),f(),b(127,26),d(128,Re,2,0,"th",19)(129,ke,3,1,"td",20),f(),b(130,27),d(131,De,2,0,"th",19)(132,Pe,3,1,"td",20),f(),b(133,23),d(134,Fe,2,0,"th",19)(135,Ae,2,2,"td",20),f(),d(136,He,1,0,"tr",24)(137,Ve,1,0,"tr",25),i(),t(138,"p",28),e(139," These commands are processed in real time by the visualization engine and can be used to finely control stimulus behavior in response to decoding events, user interactions, or adaptive experimental logic. "),i(),t(140,"p"),R(141,Be,4,2,null,null,q),i()(),t(143,"mat-tab",29),c(144,"div",16)(145,"app-experiment",30),t(146,"button",31),E("click",function(){y(g);let p=P(6);return S(p.selectedIndex=1)}),t(147,"mat-icon"),e(148,"build"),i(),e(149," Configure this experiment "),i()()()()}m&2&&(l(3),F(r.experiment.name),l(),s("innerHTML",r.experiment.description,_),l(5),s("config",r.formField)("columns",r.columns)("storageKey",r.storageKey),l(2),s("innerHTML",r.summary(),_),l(5),s("href",A("",r.currentUrl,"",r.getFullWindowLink("/stimuli")),T),l(),v(" ",r.currentUrl,"",r.getFullWindowLink("/stimuli")," "),l(),s("cdkCopyToClipboard",r.currentUrl+r.getFullWindowLink("/stimuli")),l(5),s("experimentConfig",r.formData())("embeded","embeded")("stimulusCommandMap",r.stimulusCommandMap),l(33),s("dataSource",r.toDataSource(r.stimulusCommandMap)),l(13),s("matHeaderRowDef",r.displayedColumnsCommandMap),l(),s("matRowDefColumns",r.displayedColumnsCommandMap),l(27),u("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0"),l(13),u("http://",r.hardwareService.hardwareIP(),"/?c=CMD=KEY\xA0L;CMD=BIP;"),l(13),s("dataSource",r.commandRegistry),l(13),s("matHeaderRowDef",r.displayedColumnsCommandRegistry),l(),s("matRowDefColumns",r.displayedColumnsCommandRegistry),l(4),k(r.commandRegistry),l(4),s("experiment",r.experiment))},dependencies:[V,Q,J,U,X,G,z,Z,j,$,K,fe,ie,te,be,ae,oe,de,le,re,ce,me,se,ue,pe],encapsulation:2})};export{ge as MotorImagerySequential};
